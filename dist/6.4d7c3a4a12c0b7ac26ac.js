(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./node_modules/css-loader/dist/cjs.js!./src/routes/fractal/webgl2-renderer.css":function(t,n,e){(t.exports=e("./node_modules/css-loader/dist/runtime/api.js")(!1)).push([t.i,"\n\n#canvas-left {\n    width: calc(100% - var(--canvas-width));\n    display: inline-block;\n    padding: 0 18px;\n}\n#canvas-right {\n    vertical-align: top;\n    position: relative;\n    display: inline-block;\n    width: var(--canvas-width);\n    height: var(--canvas-width);\n}\n\n@media (max-width: 1068px){\n    #canvas-left {\n        width:100%;\n    }\n    #canvas-right {\n        display: flex;\n        width: 100%;\n        height: 100%;\n        justify-content: center;\n        align-items: center;\n    }\n}",""])},"./src/routes/fractal/shaders lazy recursive ^\\.\\/.*\\.glsl$":function(t,n,e){var r={"./burning-ship.glsl":["./src/routes/fractal/shaders/burning-ship.glsl",18],"./candle-flame.glsl":["./src/routes/fractal/shaders/candle-flame.glsl",19],"./julia-and-man.glsl":["./src/routes/fractal/shaders/julia-and-man.glsl",20],"./julia-set.glsl":["./src/routes/fractal/shaders/julia-set.glsl",21],"./mandelbrot-set.glsl":["./src/routes/fractal/shaders/mandelbrot-set.glsl",22],"./newton-fractal.glsl":["./src/routes/fractal/shaders/newton-fractal.glsl",23],"./ray-tracing.glsl":["./src/routes/fractal/shaders/ray-tracing.glsl",24]};function a(t){if(!e.o(r,t))return Promise.resolve().then(function(){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n});var n=r[t],a=n[0];return e.e(n[1]).then(function(){return e(a)})}a.keys=function(){return Object.keys(r)},a.id="./src/routes/fractal/shaders lazy recursive ^\\.\\/.*\\.glsl$",t.exports=a},"./src/routes/fractal/webgl2-renderer.css":function(t,n,e){var r=e("./node_modules/css-loader/dist/cjs.js!./src/routes/fractal/webgl2-renderer.css");"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e("./node_modules/style-loader/lib/addStyles.js")(r,a);r.locals&&(t.exports=r.locals)},"./src/routes/fractal/webgl2-renderer.tsx":function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",function(){return b}),e.d(r,"clone",function(){return g}),e.d(r,"copy",function(){return E}),e.d(r,"fromValues",function(){return y}),e.d(r,"set",function(){return w}),e.d(r,"identity",function(){return x}),e.d(r,"transpose",function(){return A}),e.d(r,"invert",function(){return _}),e.d(r,"adjoint",function(){return R}),e.d(r,"determinant",function(){return S}),e.d(r,"multiply",function(){return T}),e.d(r,"translate",function(){return F}),e.d(r,"scale",function(){return z}),e.d(r,"rotate",function(){return L}),e.d(r,"rotateX",function(){return P}),e.d(r,"rotateY",function(){return N}),e.d(r,"rotateZ",function(){return I}),e.d(r,"fromTranslation",function(){return D}),e.d(r,"fromScaling",function(){return B}),e.d(r,"fromRotation",function(){return k}),e.d(r,"fromXRotation",function(){return j}),e.d(r,"fromYRotation",function(){return U}),e.d(r,"fromZRotation",function(){return C}),e.d(r,"fromRotationTranslation",function(){return Y}),e.d(r,"fromQuat2",function(){return q}),e.d(r,"getTranslation",function(){return O}),e.d(r,"getScaling",function(){return H}),e.d(r,"getRotation",function(){return V}),e.d(r,"fromRotationTranslationScale",function(){return G}),e.d(r,"fromRotationTranslationScaleOrigin",function(){return K}),e.d(r,"fromQuat",function(){return X}),e.d(r,"frustum",function(){return $}),e.d(r,"perspective",function(){return W}),e.d(r,"perspectiveFromFieldOfView",function(){return Z}),e.d(r,"ortho",function(){return Q}),e.d(r,"lookAt",function(){return J}),e.d(r,"targetTo",function(){return tt}),e.d(r,"str",function(){return nt}),e.d(r,"frob",function(){return et}),e.d(r,"add",function(){return rt}),e.d(r,"subtract",function(){return at}),e.d(r,"multiplyScalar",function(){return ot}),e.d(r,"multiplyScalarAndAdd",function(){return ut}),e.d(r,"exactEquals",function(){return it}),e.d(r,"equals",function(){return st}),e.d(r,"mul",function(){return ct}),e.d(r,"sub",function(){return lt});var a={};e.r(a),e.d(a,"create",function(){return ft}),e.d(a,"clone",function(){return dt}),e.d(a,"length",function(){return ht}),e.d(a,"fromValues",function(){return mt}),e.d(a,"copy",function(){return vt}),e.d(a,"set",function(){return Mt}),e.d(a,"add",function(){return pt}),e.d(a,"subtract",function(){return bt}),e.d(a,"multiply",function(){return gt}),e.d(a,"divide",function(){return Et}),e.d(a,"ceil",function(){return yt}),e.d(a,"floor",function(){return wt}),e.d(a,"min",function(){return xt}),e.d(a,"max",function(){return At}),e.d(a,"round",function(){return _t}),e.d(a,"scale",function(){return Rt}),e.d(a,"scaleAndAdd",function(){return St}),e.d(a,"distance",function(){return Tt}),e.d(a,"squaredDistance",function(){return Ft}),e.d(a,"squaredLength",function(){return zt}),e.d(a,"negate",function(){return Lt}),e.d(a,"inverse",function(){return Pt}),e.d(a,"normalize",function(){return Nt}),e.d(a,"dot",function(){return It}),e.d(a,"cross",function(){return Dt}),e.d(a,"lerp",function(){return Bt}),e.d(a,"hermite",function(){return kt}),e.d(a,"bezier",function(){return jt}),e.d(a,"random",function(){return Ut}),e.d(a,"transformMat4",function(){return Ct}),e.d(a,"transformMat3",function(){return Yt}),e.d(a,"transformQuat",function(){return qt}),e.d(a,"rotateX",function(){return Ot}),e.d(a,"rotateY",function(){return Ht}),e.d(a,"rotateZ",function(){return Vt}),e.d(a,"angle",function(){return Gt}),e.d(a,"zero",function(){return Kt}),e.d(a,"str",function(){return Xt}),e.d(a,"exactEquals",function(){return $t}),e.d(a,"equals",function(){return Wt}),e.d(a,"sub",function(){return Jt}),e.d(a,"mul",function(){return tn}),e.d(a,"div",function(){return nn}),e.d(a,"dist",function(){return en}),e.d(a,"sqrDist",function(){return rn}),e.d(a,"len",function(){return an}),e.d(a,"sqrLen",function(){return on}),e.d(a,"forEach",function(){return un});var o=e("react");const u=document.createElement("canvas").getContext("webgl2"),i={fbm:e("./src/services/webgl/shader-chunks/fbm.glsl").default,hsl2rgb:e("./src/services/webgl/shader-chunks/hsl2rgb.glsl").default,noise:e("./src/services/webgl/shader-chunks/noise.glsl").default,complex:e("./src/services/webgl/shader-chunks/complex.glsl").default};function s(t){return t.replace(/\#include\s+\<([a-z0-9A-Z_]+)\>;?/g,(t,n)=>i[n]||"")}function c(t,n){const e=n.match(/^ERROR\: (\d+)\:(\d+)\:/);if(e){const n=t.split(/\n/g),r=Number(e[2]);console.log(r,n.slice(r-1,r+1).join("\n"))}return new Error(n)}function l(t){const{gl:n,vsSource:e,fsSource:r,attributes:a,uniforms:o}=t,u=n.createProgram(),i=n.createShader(n.VERTEX_SHADER);n.shaderSource(i,s(e));const l=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(l,s(r)),n.compileShader(i),n.compileShader(l);{n.attachShader(u,i);const t=n.getShaderInfoLog(i);if(n.deleteShader(i),t)throw c(e,t)}{n.attachShader(u,l);const t=n.getShaderInfoLog(l);if(n.deleteShader(l),t)throw c(r,t)}if(n.linkProgram(u),!n.getProgramParameter(u,n.LINK_STATUS)){const t=n.getProgramInfoLog(u);throw new Error(t)}n.useProgram(u);const f=n.createVertexArray(),d=function(t){const n=new Map;return function(e,r,a){if(!n.has(r)){const o=e.getUniformLocation(t,r);let u=function(t,n,e){if(!(Array.isArray(e)||e instanceof Float32Array))return e=>t.uniform1f(n,e);switch(e.length){case 4:return e=>t.uniform4fv(n,e);case 3:return e=>t.uniform3fv(n,e);case 2:return e=>t.uniform2fv(n,e);case 16:return e=>t.uniformMatrix4fv(n,!0,e);case 9:return e=>t.uniformMatrix3fv(n,!0,e);default:return e=>t.uniform1fv(n,e)}}(e,o,a);n.set(r,u)}n.get(r)(a)}}(u);for(let t in o){const e=o[t];d(n,t,e)}return{program:u,draw:function(t,e){n.clear(n.DEPTH_BUFFER_BIT),n.clear(n.COLOR_BUFFER_BIT),n.drawElements(t,e.byteLength,n.UNSIGNED_BYTE,0)},bind(){n.useProgram(u),n.bindVertexArray(f)},unbind(){n.bindVertexArray(null)},init:function(){n.clearColor(1,1,1,1),n.enable(n.BLEND),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.cullFace(n.BACK),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.bindVertexArray(f);for(let t in a){const e=a[t];e.location=e.location||n.getAttribLocation(u,t),n.enableVertexAttribArray(e.location),n.vertexAttribPointer(e.location,e.size,e.type,!1,e.stride,e.offset)}},uniforms:new Proxy(o,{set:(t,e,r)=>(d(n,e,r),!0)}),dispose(){n.deleteProgram(u),n.deleteVertexArray(f)}}}var f,d;!function(t){t[t.lines=u.LINES]="lines",t[t.line_strip=u.LINE_STRIP]="line_strip",t[t.line_loop=u.LINE_LOOP]="line_loop",t[t.triangle=u.TRIANGLES]="triangle",t[t.triangle_strip=u.TRIANGLE_STRIP]="triangle_strip",t[t.triangle_fan=u.TRIANGLE_FAN]="triangle_fan"}(f||(f={})),function(t){t[t.byte=u.BYTE]="byte",t[t.short=u.SHORT]="short",t[t.unsigned_byte=u.UNSIGNED_BYTE]="unsigned_byte",t[t.unsigned_short=u.UNSIGNED_SHORT]="unsigned_short",t[t.float=u.FLOAT]="float",t[t.half_float=u.HALF_FLOAT]="half_float"}(d||(d={}));var h=e("./node_modules/rxjs/_esm5/internal/observable/fromEvent.js"),m=e("./node_modules/rxjs/_esm5/internal/operators/debounceTime.js"),v=(e("./src/routes/fractal/webgl2-renderer.css"),1e-6),M="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;Math.PI;function b(){var t=new M(16);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function g(t){var n=new M(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function E(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function y(t,n,e,r,a,o,u,i,s,c,l,f,d,h,m,v){var p=new M(16);return p[0]=t,p[1]=n,p[2]=e,p[3]=r,p[4]=a,p[5]=o,p[6]=u,p[7]=i,p[8]=s,p[9]=c,p[10]=l,p[11]=f,p[12]=d,p[13]=h,p[14]=m,p[15]=v,p}function w(t,n,e,r,a,o,u,i,s,c,l,f,d,h,m,v,M){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=u,t[6]=i,t[7]=s,t[8]=c,t[9]=l,t[10]=f,t[11]=d,t[12]=h,t[13]=m,t[14]=v,t[15]=M,t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],u=n[7],i=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=u,t[14]=i}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function _(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=n[4],i=n[5],s=n[6],c=n[7],l=n[8],f=n[9],d=n[10],h=n[11],m=n[12],v=n[13],M=n[14],p=n[15],b=e*i-r*u,g=e*s-a*u,E=e*c-o*u,y=r*s-a*i,w=r*c-o*i,x=a*c-o*s,A=l*v-f*m,_=l*M-d*m,R=l*p-h*m,S=f*M-d*v,T=f*p-h*v,F=d*p-h*M,z=b*F-g*T+E*S+y*R-w*_+x*A;return z?(z=1/z,t[0]=(i*F-s*T+c*S)*z,t[1]=(a*T-r*F-o*S)*z,t[2]=(v*x-M*w+p*y)*z,t[3]=(d*w-f*x-h*y)*z,t[4]=(s*R-u*F-c*_)*z,t[5]=(e*F-a*R+o*_)*z,t[6]=(M*E-m*x-p*g)*z,t[7]=(l*x-d*E+h*g)*z,t[8]=(u*T-i*R+c*A)*z,t[9]=(r*R-e*T-o*A)*z,t[10]=(m*w-v*E+p*b)*z,t[11]=(f*E-l*w-h*b)*z,t[12]=(i*_-u*S-s*A)*z,t[13]=(e*S-r*_+a*A)*z,t[14]=(v*g-m*y-M*b)*z,t[15]=(l*y-f*g+d*b)*z,t):null}function R(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=n[4],i=n[5],s=n[6],c=n[7],l=n[8],f=n[9],d=n[10],h=n[11],m=n[12],v=n[13],M=n[14],p=n[15];return t[0]=i*(d*p-h*M)-f*(s*p-c*M)+v*(s*h-c*d),t[1]=-(r*(d*p-h*M)-f*(a*p-o*M)+v*(a*h-o*d)),t[2]=r*(s*p-c*M)-i*(a*p-o*M)+v*(a*c-o*s),t[3]=-(r*(s*h-c*d)-i*(a*h-o*d)+f*(a*c-o*s)),t[4]=-(u*(d*p-h*M)-l*(s*p-c*M)+m*(s*h-c*d)),t[5]=e*(d*p-h*M)-l*(a*p-o*M)+m*(a*h-o*d),t[6]=-(e*(s*p-c*M)-u*(a*p-o*M)+m*(a*c-o*s)),t[7]=e*(s*h-c*d)-u*(a*h-o*d)+l*(a*c-o*s),t[8]=u*(f*p-h*v)-l*(i*p-c*v)+m*(i*h-c*f),t[9]=-(e*(f*p-h*v)-l*(r*p-o*v)+m*(r*h-o*f)),t[10]=e*(i*p-c*v)-u*(r*p-o*v)+m*(r*c-o*i),t[11]=-(e*(i*h-c*f)-u*(r*h-o*f)+l*(r*c-o*i)),t[12]=-(u*(f*M-d*v)-l*(i*M-s*v)+m*(i*d-s*f)),t[13]=e*(f*M-d*v)-l*(r*M-a*v)+m*(r*d-a*f),t[14]=-(e*(i*M-s*v)-u*(r*M-a*v)+m*(r*s-a*i)),t[15]=e*(i*d-s*f)-u*(r*d-a*f)+l*(r*s-a*i),t}function S(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],u=t[5],i=t[6],s=t[7],c=t[8],l=t[9],f=t[10],d=t[11],h=t[12],m=t[13],v=t[14],M=t[15];return(n*u-e*o)*(f*M-d*v)-(n*i-r*o)*(l*M-d*m)+(n*s-a*o)*(l*v-f*m)+(e*i-r*u)*(c*M-d*h)-(e*s-a*u)*(c*v-f*h)+(r*s-a*i)*(c*m-l*h)}function T(t,n,e){var r=n[0],a=n[1],o=n[2],u=n[3],i=n[4],s=n[5],c=n[6],l=n[7],f=n[8],d=n[9],h=n[10],m=n[11],v=n[12],M=n[13],p=n[14],b=n[15],g=e[0],E=e[1],y=e[2],w=e[3];return t[0]=g*r+E*i+y*f+w*v,t[1]=g*a+E*s+y*d+w*M,t[2]=g*o+E*c+y*h+w*p,t[3]=g*u+E*l+y*m+w*b,g=e[4],E=e[5],y=e[6],w=e[7],t[4]=g*r+E*i+y*f+w*v,t[5]=g*a+E*s+y*d+w*M,t[6]=g*o+E*c+y*h+w*p,t[7]=g*u+E*l+y*m+w*b,g=e[8],E=e[9],y=e[10],w=e[11],t[8]=g*r+E*i+y*f+w*v,t[9]=g*a+E*s+y*d+w*M,t[10]=g*o+E*c+y*h+w*p,t[11]=g*u+E*l+y*m+w*b,g=e[12],E=e[13],y=e[14],w=e[15],t[12]=g*r+E*i+y*f+w*v,t[13]=g*a+E*s+y*d+w*M,t[14]=g*o+E*c+y*h+w*p,t[15]=g*u+E*l+y*m+w*b,t}function F(t,n,e){var r,a,o,u,i,s,c,l,f,d,h,m,v=e[0],M=e[1],p=e[2];return n===t?(t[12]=n[0]*v+n[4]*M+n[8]*p+n[12],t[13]=n[1]*v+n[5]*M+n[9]*p+n[13],t[14]=n[2]*v+n[6]*M+n[10]*p+n[14],t[15]=n[3]*v+n[7]*M+n[11]*p+n[15]):(r=n[0],a=n[1],o=n[2],u=n[3],i=n[4],s=n[5],c=n[6],l=n[7],f=n[8],d=n[9],h=n[10],m=n[11],t[0]=r,t[1]=a,t[2]=o,t[3]=u,t[4]=i,t[5]=s,t[6]=c,t[7]=l,t[8]=f,t[9]=d,t[10]=h,t[11]=m,t[12]=r*v+i*M+f*p+n[12],t[13]=a*v+s*M+d*p+n[13],t[14]=o*v+c*M+h*p+n[14],t[15]=u*v+l*M+m*p+n[15]),t}function z(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function L(t,n,e,r){var a,o,u,i,s,c,l,f,d,h,m,M,p,b,g,E,y,w,x,A,_,R,S,T,F=r[0],z=r[1],L=r[2],P=Math.hypot(F,z,L);return P<v?null:(F*=P=1/P,z*=P,L*=P,a=Math.sin(e),u=1-(o=Math.cos(e)),i=n[0],s=n[1],c=n[2],l=n[3],f=n[4],d=n[5],h=n[6],m=n[7],M=n[8],p=n[9],b=n[10],g=n[11],E=F*F*u+o,y=z*F*u+L*a,w=L*F*u-z*a,x=F*z*u-L*a,A=z*z*u+o,_=L*z*u+F*a,R=F*L*u+z*a,S=z*L*u-F*a,T=L*L*u+o,t[0]=i*E+f*y+M*w,t[1]=s*E+d*y+p*w,t[2]=c*E+h*y+b*w,t[3]=l*E+m*y+g*w,t[4]=i*x+f*A+M*_,t[5]=s*x+d*A+p*_,t[6]=c*x+h*A+b*_,t[7]=l*x+m*A+g*_,t[8]=i*R+f*S+M*T,t[9]=s*R+d*S+p*T,t[10]=c*R+h*S+b*T,t[11]=l*R+m*S+g*T,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function P(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],u=n[5],i=n[6],s=n[7],c=n[8],l=n[9],f=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+c*r,t[5]=u*a+l*r,t[6]=i*a+f*r,t[7]=s*a+d*r,t[8]=c*a-o*r,t[9]=l*a-u*r,t[10]=f*a-i*r,t[11]=d*a-s*r,t}function N(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],u=n[1],i=n[2],s=n[3],c=n[8],l=n[9],f=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-c*r,t[1]=u*a-l*r,t[2]=i*a-f*r,t[3]=s*a-d*r,t[8]=o*r+c*a,t[9]=u*r+l*a,t[10]=i*r+f*a,t[11]=s*r+d*a,t}function I(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],u=n[1],i=n[2],s=n[3],c=n[4],l=n[5],f=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+c*r,t[1]=u*a+l*r,t[2]=i*a+f*r,t[3]=s*a+d*r,t[4]=c*a-o*r,t[5]=l*a-u*r,t[6]=f*a-i*r,t[7]=d*a-s*r,t}function D(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function B(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function k(t,n,e){var r,a,o,u=e[0],i=e[1],s=e[2],c=Math.hypot(u,i,s);return c<v?null:(u*=c=1/c,i*=c,s*=c,r=Math.sin(n),o=1-(a=Math.cos(n)),t[0]=u*u*o+a,t[1]=i*u*o+s*r,t[2]=s*u*o-i*r,t[3]=0,t[4]=u*i*o-s*r,t[5]=i*i*o+a,t[6]=s*i*o+u*r,t[7]=0,t[8]=u*s*o+i*r,t[9]=i*s*o-u*r,t[10]=s*s*o+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function j(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Y(t,n,e){var r=n[0],a=n[1],o=n[2],u=n[3],i=r+r,s=a+a,c=o+o,l=r*i,f=r*s,d=r*c,h=a*s,m=a*c,v=o*c,M=u*i,p=u*s,b=u*c;return t[0]=1-(h+v),t[1]=f+b,t[2]=d-p,t[3]=0,t[4]=f-b,t[5]=1-(l+v),t[6]=m+M,t[7]=0,t[8]=d+p,t[9]=m-M,t[10]=1-(l+h),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function q(t,n){var e=new M(3),r=-n[0],a=-n[1],o=-n[2],u=n[3],i=n[4],s=n[5],c=n[6],l=n[7],f=r*r+a*a+o*o+u*u;return f>0?(e[0]=2*(i*u+l*r+s*o-c*a)/f,e[1]=2*(s*u+l*a+c*r-i*o)/f,e[2]=2*(c*u+l*o+i*a-s*r)/f):(e[0]=2*(i*u+l*r+s*o-c*a),e[1]=2*(s*u+l*a+c*r-i*o),e[2]=2*(c*u+l*o+i*a-s*r)),Y(t,n,e),t}function O(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function H(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],u=n[5],i=n[6],s=n[8],c=n[9],l=n[10];return t[0]=Math.hypot(e,r,a),t[1]=Math.hypot(o,u,i),t[2]=Math.hypot(s,c,l),t}function V(t,n){var e=new M(3);H(e,n);var r=1/e[0],a=1/e[1],o=1/e[2],u=n[0]*r,i=n[1]*a,s=n[2]*o,c=n[4]*r,l=n[5]*a,f=n[6]*o,d=n[8]*r,h=n[9]*a,m=n[10]*o,v=u+l+m,p=0;return v>0?(p=2*Math.sqrt(v+1),t[3]=.25*p,t[0]=(f-h)/p,t[1]=(d-s)/p,t[2]=(i-c)/p):u>l&&u>m?(p=2*Math.sqrt(1+u-l-m),t[3]=(f-h)/p,t[0]=.25*p,t[1]=(i+c)/p,t[2]=(d+s)/p):l>m?(p=2*Math.sqrt(1+l-u-m),t[3]=(d-s)/p,t[0]=(i+c)/p,t[1]=.25*p,t[2]=(f+h)/p):(p=2*Math.sqrt(1+m-u-l),t[3]=(i-c)/p,t[0]=(d+s)/p,t[1]=(f+h)/p,t[2]=.25*p),t}function G(t,n,e,r){var a=n[0],o=n[1],u=n[2],i=n[3],s=a+a,c=o+o,l=u+u,f=a*s,d=a*c,h=a*l,m=o*c,v=o*l,M=u*l,p=i*s,b=i*c,g=i*l,E=r[0],y=r[1],w=r[2];return t[0]=(1-(m+M))*E,t[1]=(d+g)*E,t[2]=(h-b)*E,t[3]=0,t[4]=(d-g)*y,t[5]=(1-(f+M))*y,t[6]=(v+p)*y,t[7]=0,t[8]=(h+b)*w,t[9]=(v-p)*w,t[10]=(1-(f+m))*w,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function K(t,n,e,r,a){var o=n[0],u=n[1],i=n[2],s=n[3],c=o+o,l=u+u,f=i+i,d=o*c,h=o*l,m=o*f,v=u*l,M=u*f,p=i*f,b=s*c,g=s*l,E=s*f,y=r[0],w=r[1],x=r[2],A=a[0],_=a[1],R=a[2],S=(1-(v+p))*y,T=(h+E)*y,F=(m-g)*y,z=(h-E)*w,L=(1-(d+p))*w,P=(M+b)*w,N=(m+g)*x,I=(M-b)*x,D=(1-(d+v))*x;return t[0]=S,t[1]=T,t[2]=F,t[3]=0,t[4]=z,t[5]=L,t[6]=P,t[7]=0,t[8]=N,t[9]=I,t[10]=D,t[11]=0,t[12]=e[0]+A-(S*A+z*_+N*R),t[13]=e[1]+_-(T*A+L*_+I*R),t[14]=e[2]+R-(F*A+P*_+D*R),t[15]=1,t}function X(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],u=e+e,i=r+r,s=a+a,c=e*u,l=r*u,f=r*i,d=a*u,h=a*i,m=a*s,v=o*u,M=o*i,p=o*s;return t[0]=1-f-m,t[1]=l+p,t[2]=d-M,t[3]=0,t[4]=l-p,t[5]=1-c-m,t[6]=h+v,t[7]=0,t[8]=d+M,t[9]=h-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function $(t,n,e,r,a,o,u){var i=1/(e-n),s=1/(a-r),c=1/(o-u);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(e+n)*i,t[9]=(a+r)*s,t[10]=(u+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*o*2*c,t[15]=0,t}function W(t,n,e,r,a){var o,u=1/Math.tan(n/2);return t[0]=u/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(o=1/(r-a),t[10]=(a+r)*o,t[14]=2*a*r*o):(t[10]=-1,t[14]=-2*r),t}function Z(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),u=Math.tan(n.leftDegrees*Math.PI/180),i=Math.tan(n.rightDegrees*Math.PI/180),s=2/(u+i),c=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(u-i)*s*.5,t[9]=(a-o)*c*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function Q(t,n,e,r,a,o,u){var i=1/(n-e),s=1/(r-a),c=1/(o-u);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(n+e)*i,t[13]=(a+r)*s,t[14]=(u+o)*c,t[15]=1,t}function J(t,n,e,r){var a,o,u,i,s,c,l,f,d,h,m=n[0],M=n[1],p=n[2],b=r[0],g=r[1],E=r[2],y=e[0],w=e[1],A=e[2];return Math.abs(m-y)<v&&Math.abs(M-w)<v&&Math.abs(p-A)<v?x(t):(l=m-y,f=M-w,d=p-A,a=g*(d*=h=1/Math.hypot(l,f,d))-E*(f*=h),o=E*(l*=h)-b*d,u=b*f-g*l,(h=Math.hypot(a,o,u))?(a*=h=1/h,o*=h,u*=h):(a=0,o=0,u=0),i=f*u-d*o,s=d*a-l*u,c=l*o-f*a,(h=Math.hypot(i,s,c))?(i*=h=1/h,s*=h,c*=h):(i=0,s=0,c=0),t[0]=a,t[1]=i,t[2]=l,t[3]=0,t[4]=o,t[5]=s,t[6]=f,t[7]=0,t[8]=u,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*m+o*M+u*p),t[13]=-(i*m+s*M+c*p),t[14]=-(l*m+f*M+d*p),t[15]=1,t)}function tt(t,n,e,r){var a=n[0],o=n[1],u=n[2],i=r[0],s=r[1],c=r[2],l=a-e[0],f=o-e[1],d=u-e[2],h=l*l+f*f+d*d;h>0&&(l*=h=1/Math.sqrt(h),f*=h,d*=h);var m=s*d-c*f,v=c*l-i*d,M=i*f-s*l;return(h=m*m+v*v+M*M)>0&&(m*=h=1/Math.sqrt(h),v*=h,M*=h),t[0]=m,t[1]=v,t[2]=M,t[3]=0,t[4]=f*M-d*v,t[5]=d*m-l*M,t[6]=l*v-f*m,t[7]=0,t[8]=l,t[9]=f,t[10]=d,t[11]=0,t[12]=a,t[13]=o,t[14]=u,t[15]=1,t}function nt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function et(t){return Math.hypot(t[0],t[1],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function rt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function at(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function ot(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function ut(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function it(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function st(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],u=t[4],i=t[5],s=t[6],c=t[7],l=t[8],f=t[9],d=t[10],h=t[11],m=t[12],M=t[13],p=t[14],b=t[15],g=n[0],E=n[1],y=n[2],w=n[3],x=n[4],A=n[5],_=n[6],R=n[7],S=n[8],T=n[9],F=n[10],z=n[11],L=n[12],P=n[13],N=n[14],I=n[15];return Math.abs(e-g)<=v*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(r-E)<=v*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(a-y)<=v*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(o-w)<=v*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(u-x)<=v*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(i-A)<=v*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(s-_)<=v*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(c-R)<=v*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(l-S)<=v*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(f-T)<=v*Math.max(1,Math.abs(f),Math.abs(T))&&Math.abs(d-F)<=v*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-z)<=v*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(m-L)<=v*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(M-P)<=v*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(p-N)<=v*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(b-I)<=v*Math.max(1,Math.abs(b),Math.abs(I))}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var ct=T,lt=at;function ft(){var t=new M(3);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function dt(t){var n=new M(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function ht(t){var n=t[0],e=t[1],r=t[2];return Math.hypot(n,e,r)}function mt(t,n,e){var r=new M(3);return r[0]=t,r[1]=n,r[2]=e,r}function vt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Mt(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t}function pt(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t}function bt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function gt(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function Et(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function yt(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function wt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function xt(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t}function At(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t}function _t(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function Rt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t}function St(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t}function Tt(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.hypot(e,r,a)}function Ft(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function zt(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function Lt(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function Pt(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function Nt(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o,t}function It(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Dt(t,n,e){var r=n[0],a=n[1],o=n[2],u=e[0],i=e[1],s=e[2];return t[0]=a*s-o*i,t[1]=o*u-r*s,t[2]=r*i-a*u,t}function Bt(t,n,e,r){var a=n[0],o=n[1],u=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=u+r*(e[2]-u),t}function kt(t,n,e,r,a,o){var u=o*o,i=u*(2*o-3)+1,s=u*(o-2)+o,c=u*(o-1),l=u*(3-2*o);return t[0]=n[0]*i+e[0]*s+r[0]*c+a[0]*l,t[1]=n[1]*i+e[1]*s+r[1]*c+a[1]*l,t[2]=n[2]*i+e[2]*s+r[2]*c+a[2]*l,t}function jt(t,n,e,r,a,o){var u=1-o,i=u*u,s=o*o,c=i*u,l=3*o*i,f=3*s*u,d=s*o;return t[0]=n[0]*c+e[0]*l+r[0]*f+a[0]*d,t[1]=n[1]*c+e[1]*l+r[1]*f+a[1]*d,t[2]=n[2]*c+e[2]*l+r[2]*f+a[2]*d,t}function Ut(t,n){n=n||1;var e=2*p()*Math.PI,r=2*p()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t}function Ct(t,n,e){var r=n[0],a=n[1],o=n[2],u=e[3]*r+e[7]*a+e[11]*o+e[15];return u=u||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/u,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/u,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/u,t}function Yt(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t}function qt(t,n,e){var r=e[0],a=e[1],o=e[2],u=e[3],i=n[0],s=n[1],c=n[2],l=a*c-o*s,f=o*i-r*c,d=r*s-a*i,h=a*d-o*f,m=o*l-r*d,v=r*f-a*l,M=2*u;return l*=M,f*=M,d*=M,h*=2,m*=2,v*=2,t[0]=i+l+h,t[1]=s+f+m,t[2]=c+d+v,t}function Ot(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Ht(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Vt(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function Gt(t,n){var e=mt(t[0],t[1],t[2]),r=mt(n[0],n[1],n[2]);Nt(e,e),Nt(r,r);var a=It(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)}function Kt(t){return t[0]=0,t[1]=0,t[2]=0,t}function Xt(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function $t(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function Wt(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],u=n[1],i=n[2];return Math.abs(e-o)<=v*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-u)<=v*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-i)<=v*Math.max(1,Math.abs(a),Math.abs(i))}var Zt,Qt,Jt=bt,tn=gt,nn=Et,en=Tt,rn=Ft,an=ht,on=zt,un=(Zt=ft(),function(t,n,e,r,a,o){var u,i;for(n||(n=3),e||(e=0),i=r?Math.min(r*n+e,t.length):t.length,u=e;u<i;u+=n)Zt[0]=t[u],Zt[1]=t[u+1],Zt[2]=t[u+2],a(Zt,Zt,o),t[u]=Zt[0],t[u+1]=Zt[1],t[u+2]=Zt[2];return t});e.d(n,"default",function(){return hn}),function(t){t[t.twod=0]="twod",t[t.threed=1]="threed"}(Qt||(Qt={}));const sn=[["mandelbrot-set",Qt.twod],["julia-set",Qt.threed],["burning-ship",Qt.twod],["julia-and-man",Qt.twod],["newton-fractal",Qt.twod],["ray-tracing",Qt.threed]],cn="#version 300 es\nprecision highp float;\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nin vec3 position;\nin vec2 uv;\nout vec3 vPos;\nout vec2 vUv;\n\nvoid main(){\n    vPos = position;\n    vUv = uv;\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n}\n",ln=window.innerWidth<1068,fn=ln?window.innerWidth:720,dn=ln?window.innerWidth:720;function hn(t){const n=o.useRef(),u=o.useRef(),i=o.useRef(),[s,c]=o.useState(()=>{return new URLSearchParams(location.search).get("shader")||sn[0][0]});o.useEffect(()=>{const t=Object(h.a)(window,"scroll").pipe(Object(m.a)(500)).subscribe(t=>{if(n.current&&window.innerWidth>768){n.current.style.top=window.scrollY+"px"}});return()=>t.unsubscribe()},[]);const[f,v]=o.useState(null);o.useEffect(()=>{e("./src/routes/fractal/shaders lazy recursive ^\\.\\/.*\\.glsl$")("./"+s+".glsl").then(t=>{v(t.default),u.current&&(u.current.innerText=t.default)})},[s]);const M=o.useMemo(()=>({zoom:1,translate:[0,0],paused:!1,mouse:[0,0]}),[]),[p,b]=o.useState(null);o.useEffect(()=>{const t=n.current,e=[],r=sn.find(t=>t[0]===s),a=r&&r[1]||Qt.twod,o=t=>{if(t.preventDefault(),t.stopPropagation(),t.ctrlKey){const n=t.offsetX,e=fn-t.offsetY,r=(100+t.deltaY)/100;a===Qt.twod&&(M.translate[0]=(M.translate[0]+n)/r-n,M.translate[1]=(M.translate[1]+e)/r-e),M.zoom*=r}else M.translate[0]+=t.deltaX,M.translate[1]-=t.deltaY};t.addEventListener("wheel",o),e.push(()=>{t.removeEventListener("wheel",o)});const u=()=>{M.paused=!M.paused};t.addEventListener("click",u),e.push(()=>{t.removeEventListener("click",u)});const c=t=>{((t,n)=>{const e=(t+M.translate[0])/dn*M.zoom*2-1,r=(n+M.translate[1])/fn*M.zoom*2-1;M.mouse[0]=e,M.mouse[1]=r,i&&i.current&&(i.current.innerHTML=`${e.toLocaleString("zh-CN",{maximumFractionDigits:2,minimumFractionDigits:2})},${r.toLocaleString("zh-CN",{maximumFractionDigits:2,minimumFractionDigits:2})}`)})(t.offsetX,fn-t.offsetY)},l=n=>{t.setPointerCapture(n.pointerId)},f=n=>{t.releasePointerCapture(n.pointerId)};return t.addEventListener("pointerenter",l),t.addEventListener("pointerleave",f),t.addEventListener("pointermove",c),e.push(()=>{t.removeEventListener("pointerenter",l),t.removeEventListener("pointerleave",f),t.removeEventListener("pointermove",c)}),()=>{e.forEach(t=>t())}},[s]),o.useEffect(()=>{const t=n.current;if(f&&t){const n={alpha:!0,depth:!0,antialias:!0,premultipliedAlpha:!1,devicePixelRatio:window.devicePixelRatio};let e=t.getContext("webgl2",n);e||(e=t.getContext("experimental-webgl2",n));const o=10,u=10,i=5,s=new Float32Array((o+1)*(u+1)*i);for(let t=0;t<=u;t++)for(let n=0;n<=o;n++){let e=(t*(o+1)+n)*i;s[e]=n,s[e+1]=t,s[e+2]=1,s[e+3]=n/o,s[e+4]=t/u}const c=function(t,n){let e=new Uint8Array(t*n*6),r=t+1,a=n+1;for(let t=0;t<a-1;t++)for(let n=0;n<r-1;n++){const a=t*r+n;e.set([a,a+1,a+r+1,a+r+1,a+r,a],6*(a-t))}return e}(o,u),h=r.create();r.perspective(h,Math.acos(dn/fn)/2,dn/fn,.1,1e3);const m=a.create();a.normalize(m,[50,50,50]);const v=a.create();a.normalize(m,[-1,-1,1]);const p=r.create();r.lookAt(p,m,[0,0,0],v);const E=r.create();r.fromTranslation(E,[0,0,0]);const y=r.create();r.multiply(y,p,E),r.multiply(y,h,y),console.log(`[\n${y.slice(0,4)}\n${y.slice(4,8)}\n${y.slice(8,12)}\n${y.slice(12,16)}\n]`),b(null);try{const t=function({gl:t,vboData:n,eboData:e}){const r=t.createBuffer(),a=t.createBuffer();function o(){t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW),o(),{dispose(){t.deleteBuffer(r)},bind(){t.bindBuffer(t.ARRAY_BUFFER,r),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a)},unbind:o,byteLength:e.byteLength}}({gl:e,vboData:s,eboData:c}),n=l({gl:e,vsSource:cn,fsSource:f,attributes:{position:{type:d.float,size:3,stride:i*Float32Array.BYTES_PER_ELEMENT,offset:0},uv:{type:d.float,size:2,stride:i*Float32Array.BYTES_PER_ELEMENT,offset:3*Float32Array.BYTES_PER_ELEMENT}},uniforms:{projectionMatrix:[2/o,0,0,-1,0,2/u,0,-1,0,0,1,-.5,0,0,0,1],viewMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],modelMatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],resolution:[dn,fn],time:0,params:g,zoom:M.zoom,translate:M.translate,mouse:M.mouse}});let r=0,a=0;n.bind(),t.bind(),n.init();let h=!0;let m=requestAnimationFrame(function o(u){n.uniforms.translate=M.translate,n.uniforms.zoom=M.zoom,n.uniforms.params=g;let i=u-a;if(n.uniforms.time=i,M.paused?a+=u-r:n.uniforms.mouse=M.mouse,r=u,n.draw(e.TRIANGLES,t),h){const t=new Uint8Array(4);e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,t),console.log([...t]),h=!1}m=requestAnimationFrame(o)});return()=>{cancelAnimationFrame(m),n.dispose(),t.dispose()}}catch(t){b(t)}}},[f]);const g=o.useMemo(()=>[1,0,0],[]),[E,y]=o.useState(g);return o.createElement(o.Fragment,null,o.createElement("div",{id:"canvas-left"},o.createElement("p",null,"一些看似复杂其实跟Hello World一样简单的东西, 没有用框架, 纯粹是为了学习webgl的API做的轮子. 编辑下面文本框中的代码可以直接更新图像."),o.createElement("div",{onChange:t=>{const n=t.target.value;c(n);const e=new URL(location.href);e.search="?shader="+n,history.pushState(null,document.title,e.href)}},o.createElement("h4",null,"Shaders"),sn.map(t=>{const[n]=t;return o.createElement("label",{style:{display:"block"},key:n},o.createElement("input",{defaultChecked:s===n,type:"radio",key:n,name:"fsName",value:n}),n)})),o.createElement("div",null,o.createElement("h4",null,"Parameters"),g.map((t,n)=>o.createElement("label",{style:{display:"block"},key:n},o.createElement("span",{style:{marginRight:2}},["x","y","z"][n]),o.createElement("input",{type:"range",value:String(E[n]),max:500,min:0,step:1,onChange:t=>{g[n]=t.currentTarget.valueAsNumber,y([...g])}}),o.createElement("input",{type:"number",value:String(E[n]),max:500,min:0,step:1,onChange:t=>{g[n]=t.currentTarget.valueAsNumber,y([...g])}})))),o.createElement("div",null,o.createElement("p",null,"mouse is currently at (",o.createElement("span",{ref:i}),")")),p?o.createElement("pre",{style:{color:"red"}},p.message):null,o.createElement("div",{ref:u,style:{whiteSpace:"pre-wrap",background:"#000",color:"#80ff80",padding:15,borderRadius:10,fontSize:12,fontFamily:"Menlo, Monaco, 'Courier New', monospace"},contentEditable:!0,onFocus:t=>{},onInput:t=>{t.target.timer?(clearTimeout(t.target.timer),t.target.timer=null):t.target.timer=setTimeout(()=>{v(t.currentTarget.innerText)},2e3)}})),o.createElement("div",{id:"canvas-right"},o.createElement("canvas",{style:{position:"relative",width:dn,height:fn,top:0,transition:"top .4s ease"},height:fn*devicePixelRatio,width:dn*devicePixelRatio,ref:n})))}},"./src/services/webgl/shader-chunks/complex.glsl":function(t,n,e){"use strict";e.r(n),n.default="\nvec2 complexExp(vec2 z){\n    return exp(z.x) * vec2(\n        cos(z.y),\n        sin(z.y)\n    );\n}\n\nvec2 polarForm(vec2 z){\n    float rad = atan(z.y,z.x); //atan is -pi ~ pi\n    float l = length(z);\n    return vec2(l,rad);\n}\n\nvec2 complexPow(vec2 z, float power){\n    vec2 pz = polarForm(z);\n    return pow(pz.x, power) * vec2(\n        cos(pz.y * power),\n        sin(pz.y * power)\n    );\n}\n\nvec2 complexDiv(vec2 z1, vec2 z2){\n    vec2 pz1 = polarForm(z1);\n    vec2 pz2 = polarForm(z2);\n    return pz1.x / pz2.x * vec2(\n        cos(pz1.y - pz2.y),\n        sin(pz1.y - pz2.y)\n    );\n}"},"./src/services/webgl/shader-chunks/fbm.glsl":function(t,n,e){"use strict";e.r(n),n.default="\n\nfloat fbm(vec2 uv){\n\tfloat f;\n\tmat2 m = mat2( 1.6,  1.2, -1.2,  1.6 );\n\tf  = 0.5000*noise( uv ); uv = m*uv;\n\tf += 0.2500*noise( uv ); uv = m*uv;\n\tf += 0.1250*noise( uv ); uv = m*uv;\n\tf += 0.0625*noise( uv ); uv = m*uv;\n\tf = 0.5 + 0.5*f;\n\treturn f;\n}\n\nfloat fbm_light(vec2 uv){\n\tfloat f;\n\tmat2 m = mat2( 1.6,  1.2, -1.2,  1.6 );\n\tf  = 0.5000*noise( uv ); uv = m*uv;\n\tf += 0.2500*noise( uv ); uv = m*uv;\n\t// f += 0.1250*noise( uv ); uv = m*uv;\n\t// f += 0.0625*noise( uv ); uv = m*uv;\n\tf = 0.5 + 0.5*f;\n\treturn f;\n}"},"./src/services/webgl/shader-chunks/hsl2rgb.glsl":function(t,n,e){"use strict";e.r(n),n.default="\nvec3 hsl2rgb( in vec3 c ){\n    vec3 rgb = clamp(\n        abs(\n            mod(\n                c.x*6.0+vec3(0.0,4.0,2.0),\n                6.0\n            )-3.0\n        )-1.0,\n        0.0,\n        1.0 \n    );\n    rgb = rgb*rgb*(3.0-2.0*rgb);\n    return c.z * mix(vec3(1.0), rgb, c.y);\n}"},"./src/services/webgl/shader-chunks/noise.glsl":function(t,n,e){"use strict";e.r(n),n.default="\n/**\n * @author https://www.shadertoy.com/view/XsXSWS\n */\n\nvec2 hash(vec2 p){\n\tp = vec2( dot(p,vec2(127.1,311.7)),\n\t\t\t dot(p,vec2(269.5,183.3)) );\n\treturn -1.0 + 2.0*fract(sin(p)*43758.5453123);\n}\n\nfloat noise( in vec2 p ){\n\tconst float K1 = 0.366025404; // (sqrt(3)-1)/2;\n\tconst float K2 = 0.211324865; // (3-sqrt(3))/6;\n\t\n\tvec2 i = floor( p + (p.x+p.y)*K1 );\n\t\n\tvec2 a = p - i + (i.x+i.y)*K2;\n\tvec2 o = (a.x>a.y) ? vec2(1.0,0.0) : vec2(0.0,1.0);\n\tvec2 b = a - o + K2;\n\tvec2 c = a - 1.0 + 2.0*K2;\n\t\n\tvec3 h = max( 0.5-vec3(dot(a,a), dot(b,b), dot(c,c) ), 0.0 );\n\t\n\tvec3 n = h*h*h*h*vec3( dot(a,hash(i+0.0)), dot(b,hash(i+o)), dot(c,hash(i+1.0)));\n\t\n\treturn dot( n, vec3(70.0) );\n}"}}]);