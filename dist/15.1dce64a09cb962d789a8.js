(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"./src/routes/demos/moonphase-painter/index.tsx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return d});var l=n("react");const i=["🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘"];function o([e,t,n,l]){return l/255*(.2126*e/255+.7152*t/255+.0722*n/255)}function c(e,t,n){if(0===e.length||t>=e.length-2||n>=e[0].length-2)return i[0];const l=(e[t][n]+e[t][n+1]+e[t][n+2])/3,o=(e[t+1][n]+e[t+1][n+1]+e[t+1][n+2])/3,c=(e[t+2][n]+e[t+2][n+1]+e[t+2][n+2])/3;return l<.5?o>=.5?"🌔":o>.5?"🌓":c>.5?"🌒":"🌑":o<.5?"🌘":o<.5?"🌗":c<.5?"🌖":"🌕"}function r(e,t,n,l=1){const i=document.querySelector("#output");i.innerHTML=e,i.style.transform=`scale(${l})`,i.style.height=n/l+"px",i.style.width=t/l+"px"}function a(e,t,n,l=.1){r(e.map(e=>e.join("")).join("\n"),t,n,l)}function u(e,t){const n=e.clientWidth/t,l=e.clientHeight/t,i=e.getContext("2d");let r=[];for(let e=0;e<n;e++){r[e]=[];for(let n=0;n<l;n++){const l=o(i.getImageData(e*t,n*t,t,t).data);r[e][n]=l}}const a=[];for(let e=0;e<r.length-2;e++)for(let t=0;t<r[e].length-2;t++)a[t]||(a[t]=[]),a[t][e]=c(r,e,t);return a}function s(){!function(){const e=document.getElementById("file");e.addEventListener("change",t=>{const n=e.files[0];if(n){const e=URL.createObjectURL(n),t=document.querySelector("#image");t.src=e,r("loading...",200,100),t.addEventListener("load",()=>{const e=t.clientWidth,n=t.clientHeight,l=document.querySelector("canvas"),i=l.getContext("2d");l.height=n,l.width=e,i.drawImage(t,0,0),r("generating...",200,100),a(u(l,function(e){return e>1e3?5:2}(e)),e,n)})}})}(),function(){const e=document.getElementById("text");e.addEventListener("change",t=>{const n=e.value,l=document.querySelector("canvas"),i=l.getContext("2d"),o=document.querySelector("#fontsize");let c=20;o&&(c=Number(o.value)),l.width=c,l.height=n.length*c,i.clearRect(0,0,l.width,l.height),i.fillStyle="#ffffff",i.font=c+"px Arial",i.textBaseline="top";for(let e=0;e<n.length;e++)i.fillText(n[e],0,c*e);a(u(l,1),10*l.width,10*l.height,1)})}()}function d(){return l.useEffect(()=>{s()},[]),l.createElement("div",null,l.createElement("section",null,l.createElement("div",null,l.createElement("label",null,"image to moonphase 图片->月球文",l.createElement("input",{type:"file",id:"file"}))),l.createElement("div",null,l.createElement("label",null,"text to moonphase 文字->月球文",l.createElement("input",{type:"text",id:"text"})),l.createElement("label",null,"font size 文字大小",l.createElement("input",{type:"number",defaultValue:"20",id:"fontsize"})))),l.createElement("section",{id:"output",style:{transformOrigin:"left top",whiteSpace:"pre"}}),l.createElement("canvas",{style:{opacity:0,textOrientation:"upright"}}),l.createElement("img",{id:"image",style:{opacity:0}}))}}}]);
//# sourceMappingURL=15.1dce64a09cb962d789a8.js.map