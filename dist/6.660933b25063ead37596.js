(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./node_modules/direction/index.js":function(e,t,r){"use strict";e.exports=function(e){if(e=String(e||""),o.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var n="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",o=new RegExp("^[^"+n+"]*[֑-߿יִ-﷽ﹰ-ﻼ]"),a=new RegExp("^[^֑-߿יִ-﷽ﹰ-ﻼ]*["+n+"]")},"./node_modules/esrever/esrever.js":function(e,t,r){(function(e,n){var o;/*! https://mths.be/esrever v0.2.0 by @mathias */!function(a){var i=t,s=(e&&e.exports,"object"==typeof n&&n);s.global!==s&&s.window;var l=/([\0-\u02FF\u0370-\u1AAF\u1B00-\u1DBF\u1E00-\u20CF\u2100-\uD7FF\uE000-\uFE1F\uFE30-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])([\u0300-\u036F\u1AB0-\u1AFF\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]+)/g,c=/([\uD800-\uDBFF])([\uDC00-\uDFFF])/g,u=function(e){for(var t="",r=(e=e.replace(l,function(e,t,r){return u(r)+t}).replace(c,"$2$1")).length;r--;)t+=e.charAt(r);return t},d={version:"0.2.0",reverse:u};void 0===(o=function(){return d}.call(t,r,t,e))||(e.exports=o)}()}).call(this,r("./node_modules/webpack/buildin/module.js")(e),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/immer/dist/immer.module.js":function(e,t,r){"use strict";(function(process){var e;r.d(t,"a",function(){return se}),r.d(t,"b",function(){return le}),r.d(t,"c",function(){return h}),r.d(t,"d",function(){return ie});var n,o,a="undefined"!=typeof Symbol,i="undefined"!=typeof Map,s="undefined"!=typeof Set,l=a?Symbol("immer-nothing"):((e={})["immer-nothing"]=!0,e),c=a?Symbol("immer-draftable"):"__$immer_draftable",u=a?Symbol("immer-state"):"__$immer_state",d=a?Symbol.iterator:"@@iterator",f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function p(e,t){function r(){this.constructor=e}f(e,t),e.prototype=(r.prototype=t.prototype,new r)}function h(e){return!!e&&!!e[u]}function v(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[c]||!!e.constructor[c]||x(e)||E(e))}!function(e){e[e.Object=0]="Object",e[e.Array=1]="Array",e[e.Map=2]="Map",e[e.Set=3]="Set"}(n||(n={})),function(e){e[e.ProxyObject=0]="ProxyObject",e[e.ProxyArray=1]="ProxyArray",e[e.ES5Object=2]="ES5Object",e[e.ES5Array=3]="ES5Array",e[e.Map=4]="Map",e[e.Set=5]="Set"}(o||(o={}));var g="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function m(e,t){y(e)===n.Object?g(e).forEach(function(r){return t(r,e[r],e)}):e.forEach(function(r,n){return t(n,r,e)})}function y(e){if(e||C(),e[u])switch(e[u].type){case o.ES5Object:case o.ProxyObject:return n.Object;case o.ES5Array:case o.ProxyArray:return n.Array;case o.Map:return n.Map;case o.Set:return n.Set}return Array.isArray(e)?n.Array:x(e)?n.Map:E(e)?n.Set:n.Object}function b(e,t){return y(e)===n.Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function w(e,t){return y(e)===n.Map?e.get(t):e[t]}function O(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function x(e){return i&&e instanceof Map}function E(e){return s&&e instanceof Set}function j(e){return e.copy||e.base}function k(e,t){if(void 0===t&&(t=!1),Array.isArray(e))return e.slice();var r=Object.create(Object.getPrototypeOf(e));return g(e).forEach(function(n){if(n!==u){var o=Object.getOwnPropertyDescriptor(e,n),a=o.value;if(o.get){if(!t)throw new Error("Immer drafts cannot have computed properties");a=o.get.call(e)}o.enumerable?r[n]=a:Object.defineProperty(r,n,{value:a,writable:!0,configurable:!0})}}),r}function P(e,t){if(v(e)&&!h(e)&&!Object.isFrozen(e)){var r=y(e);r===n.Set?e.add=e.clear=e.delete=F:r===n.Map&&(e.set=e.clear=e.delete=F),Object.freeze(e),t&&m(e,function(e,t){return P(t,!0)})}}function F(){throw new Error("This object has been frozen and should not be mutated")}function C(){throw new Error("Illegal state, please file a bug")}var S=function(){function e(e,t){this.drafts=[],this.parent=e,this.immer=t,this.canAutoFreeze=!0}return e.prototype.usePatches=function(e){e&&(this.patches=[],this.inversePatches=[],this.patchListener=e)},e.prototype.revoke=function(){this.leave(),this.drafts.forEach(A),this.drafts=null},e.prototype.leave=function(){this===e.current&&(e.current=this.parent)},e.enter=function(t){var r=new e(e.current,t);return e.current=r,r},e}();function A(e){var t=e[u];t.type===o.ProxyObject||t.type===o.ProxyArray?t.revoke():t.revoked=!0}function D(e,t,r){var n=r.drafts[0],o=void 0!==t&&t!==n;if(e.willFinalize(r,t,o),o){if(n[u].modified)throw r.revoke(),new Error("An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.");v(t)&&(t=_(e,t,r),r.parent||N(e,t)),r.patches&&(r.patches.push({op:"replace",path:[],value:t}),r.inversePatches.push({op:"replace",path:[],value:n[u].base}))}else t=_(e,n,r,[]);return r.revoke(),r.patches&&r.patchListener(r.patches,r.inversePatches),t!==l?t:void 0}function _(e,t,r,n){var a=t[u];if(!a)return Object.isFrozen(t)?t:B(e,t,r);if(a.scope!==r)return t;if(!a.modified)return N(e,a.base,!0),a.base;if(!a.finalized){if(a.finalized=!0,B(e,a.draft,r,n),e.onDelete&&a.type!==o.Set)if(e.useProxies){m(a.assigned,function(t,r){r||e.onDelete(a,t)})}else{var i=a.base,s=a.copy;m(i,function(t){b(s,t)||e.onDelete(a,t)})}e.onCopy&&e.onCopy(a),e.autoFreeze&&r.canAutoFreeze&&P(a.copy,!1),n&&r.patches&&function(e,t,r,n){switch(e.type){case o.ProxyObject:case o.ES5Object:case o.Map:return function(e,t,r,n){var o=e.base,a=e.copy;m(e.assigned,function(e,i){var s=w(o,e),l=w(a,e),c=i?b(o,e)?"replace":"add":"remove";if(s!==l||"replace"!==c){var u=t.concat(e);r.push("remove"===c?{op:c,path:u}:{op:c,path:u,value:l}),n.push("add"===c?{op:"remove",path:u}:"remove"===c?{op:"add",path:u,value:s}:{op:"replace",path:u,value:s})}})}(e,t,r,n);case o.ES5Array:case o.ProxyArray:return function(e,t,r,n){var o,a,i=e.base,s=e.assigned,l=e.copy;l||C();l.length<i.length&&(i=(o=[l,i])[0],l=o[1],r=(a=[n,r])[0],n=a[1]);var c=l.length-i.length,u=0;for(;i[u]===l[u]&&u<i.length;)++u;var d=i.length;for(;d>u&&i[d-1]===l[d+c-1];)--d;for(var f=u;f<d;++f)if(s[f]&&l[f]!==i[f]){var p=t.concat([f]);r.push({op:"replace",path:p,value:l[f]}),n.push({op:"replace",path:p,value:i[f]})}var h=r.length;for(f=d+c-1;f>=d;--f){p=t.concat([f]);r[h+f-d]={op:"add",path:p,value:l[f]},n.push({op:"remove",path:p})}}(e,t,r,n);case o.Set:(function(e,t,r,n){var o=e.base,a=e.copy,i=0;o.forEach(function(e){if(!a.has(e)){var o=t.concat([i]);r.push({op:"remove",path:o,value:e}),n.unshift({op:"add",path:o,value:e})}i++}),i=0,a.forEach(function(e){if(!o.has(e)){var a=t.concat([i]);r.push({op:"add",path:a,value:e}),n.unshift({op:"remove",path:a,value:e})}i++})})(e,t,r,n)}}(a,n,r.patches,r.inversePatches)}return a.copy}function B(e,t,r,a){var i=t[u];return i&&(i.type!==o.ES5Object&&i.type!==o.ES5Array||(i.copy=k(i.draft,!0)),t=i.copy),m(t,function(o,s){return function e(t,r,o,a,i,s,l,c){if(l===i)throw Error("Immer forbids circular references");var u=!!a&&i===o;var d=E(i);if(h(l)){var f=c&&u&&!d&&!b(a.assigned,s)?c.concat(s):void 0;l=_(t,l,r,f),function(e,t,r){switch(y(e)){case n.Map:e.set(t,r);break;case n.Set:e.delete(t),e.add(r);break;default:e[t]=r}}(i,s,l),h(l)&&(r.canAutoFreeze=!1)}else{if(u&&O(l,w(a.base,s)))return;v(l)&&(m(l,function(n,i){return e(t,r,o,a,l,n,i,c)}),r.parent||N(t,l))}u&&t.onAssign&&!d&&t.onAssign(a,s,l)}(e,r,t,i,t,o,s,a)}),t}function N(e,t,r){void 0===r&&(r=!1),e.autoFreeze&&!h(t)&&P(t,r)}var M={get:function(e,t){if(t===u)return e;var r=e.drafts;if(!e.modified&&b(r,t))return r[t];var n=j(e)[t];if(e.finalized||!v(n))return n;if(e.modified){if(n!==R(e.base,t))return n;r=e.copy}return r[t]=e.scope.immer.createProxy(n,e)},has:function(e,t){return t in j(e)},ownKeys:function(e){return Reflect.ownKeys(j(e))},set:function(e,t,r){if(!e.modified){var n=R(e.base,t);if(r?O(n,r)||r===e.drafts[t]:O(n,r)&&t in e.base)return!0;L(e),I(e)}return e.assigned[t]=!0,e.copy[t]=r,!0},deleteProperty:function(e,t){return void 0!==R(e.base,t)||t in e.base?(e.assigned[t]=!1,L(e),I(e)):e.assigned[t]&&delete e.assigned[t],e.copy&&delete e.copy[t],!0},getOwnPropertyDescriptor:function(e,t){var r=j(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&(n.writable=!0,n.configurable=e.type!==o.ProxyArray||"length"!==t),n},defineProperty:function(){throw new Error("Object.defineProperty() cannot be used on an Immer draft")},getPrototypeOf:function(e){return Object.getPrototypeOf(e.base)},setPrototypeOf:function(){throw new Error("Object.setPrototypeOf() cannot be used on an Immer draft")}},T={};function R(e,t){var r=e[u],n=Reflect.getOwnPropertyDescriptor(r?j(r):e,t);return n&&n.value}function I(e){if(!e.modified){if(e.modified=!0,e.type===o.ProxyObject||e.type===o.ProxyArray){var t=e.copy=k(e.base);m(e.drafts,function(e,r){t[e]=r}),e.drafts=void 0}e.parent&&I(e.parent)}}function L(e){e.copy||(e.copy=k(e.base))}function z(e,t,r){e.drafts.forEach(function(e){e[u].finalizing=!0}),r?h(t)&&t[u].scope===e&&$(e.drafts):(e.patches&&function e(t){if(!t||"object"!=typeof t)return;var r=t[u];if(!r)return;var n=r.base,a=r.draft,i=r.assigned,s=r.type;if(s===o.ES5Object)m(a,function(t){t!==u&&(void 0!==n[t]||b(n,t)?i[t]||e(a[t]):(i[t]=!0,V(r)))}),m(n,function(e){void 0!==a[e]||b(a,e)||(i[e]=!1,V(r))});else if(s===o.ES5Array){if(X(r)&&(V(r),i.length=!0),a.length<n.length)for(var l=a.length;l<n.length;l++)i[l]=!1;else for(var l=n.length;l<a.length;l++)i[l]=!0;for(var c=Math.min(a.length,n.length),l=0;l<c;l++)void 0===i[l]&&e(a[l])}}(e.drafts[0]),$(e.drafts))}function W(e,t){var r=Array.isArray(e),n=K(e);m(n,function(t){!function(e,t,r){var n=J[t];n?n.enumerable=r:J[t]=n={configurable:!0,enumerable:r,get:function(){return function(e,t){U(e);var r=q(j(e),t);if(e.finalizing)return r;if(r===q(e.base,t)&&v(r))return H(e),e.copy[t]=e.scope.immer.createProxy(r,e);return r}(this[u],t)},set:function(e){!function(e,t,r){if(U(e),e.assigned[t]=!0,!e.modified){if(O(r,q(j(e),t)))return;V(e),H(e)}e.copy[t]=r}(this[u],t,e)}};Object.defineProperty(e,t,n)}(n,t,r||function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(!r||!r.enumerable)}(e,t))});var a,i,s,l={type:r?o.ES5Array:o.ES5Object,scope:t?t.scope:S.current,modified:!1,finalizing:!1,finalized:!1,assigned:{},parent:t,base:e,draft:n,copy:null,revoked:!1,isManual:!1};return a=n,i=u,s=l,Object.defineProperty(a,i,{value:s,enumerable:!1,writable:!0}),n}function q(e,t){var r=e[u];if(r&&!r.finalizing){r.finalizing=!0;var n=e[t];return r.finalizing=!1,n}return e[t]}function V(e){e.modified||(e.modified=!0,e.parent&&V(e.parent))}function H(e){e.copy||(e.copy=K(e.base))}function K(e){var t=e&&e[u];if(t){t.finalizing=!0;var r=k(t.draft,!0);return t.finalizing=!1,r}return k(e)}m(M,function(e,t){T[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),T.deleteProperty=function(e,t){if(isNaN(parseInt(t)))throw new Error("Immer only supports deleting array indices");return M.deleteProperty.call(this,e[0],t)},T.set=function(e,t,r){if("length"!==t&&isNaN(parseInt(t)))throw new Error("Immer only supports setting array indices and the 'length' property");return M.set.call(this,e[0],t,r,e[0])};var J={};function U(e){if(!0===e.revoked)throw new Error("Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+JSON.stringify(j(e)))}function $(e){for(var t=e.length-1;t>=0;t--){var r=e[t][u];if(!r.modified)switch(r.type){case o.ES5Array:X(r)&&V(r);break;case o.ES5Object:Y(r)&&V(r)}}}function Y(e){for(var t=e.base,r=e.draft,n=Object.keys(r),o=n.length-1;o>=0;o--){var a=n[o],i=t[a];if(void 0===i&&!b(t,a))return!0;var s=r[a],l=s&&s[u];if(l?l.base!==i:!O(s,i))return!0}return n.length!==Object.keys(t).length}function X(e){var t=e.draft;if(t.length!==e.base.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}var G=function(e){if(!e)throw new Error("Map is not polyfilled");function t(e,t){return this[u]={type:o.Map,parent:t,scope:t?t.scope:S.current,modified:!1,finalized:!1,copy:void 0,assigned:void 0,base:e,draft:this,isManual:!1,revoked:!1},this}p(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return j(this[u]).size},enumerable:!0,configurable:!0}),r.has=function(e){return j(this[u]).has(e)},r.set=function(e,t){var r=this[u];return U(r),j(r).get(e)!==t&&(Z(r),r.scope.immer.markChanged(r),r.assigned.set(e,!0),r.copy.set(e,t),r.assigned.set(e,!0)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[u];return U(t),Z(t),t.scope.immer.markChanged(t),t.assigned.set(e,!1),t.copy.delete(e),!0},r.clear=function(){var e=this[u];return U(e),Z(e),e.scope.immer.markChanged(e),e.assigned=new Map,e.copy.clear()},r.forEach=function(e,t){var r=this;j(this[u]).forEach(function(n,o,a){e.call(t,r.get(o),o,r)})},r.get=function(e){var t=this[u];U(t);var r=j(t).get(e);if(t.finalized||!v(r))return r;if(r!==t.base.get(e))return r;var n=t.scope.immer.createProxy(r,t);return Z(t),t.copy.set(e,n),n},r.keys=function(){return j(this[u]).keys()},r.values=function(){var e,t=this,r=this.keys();return(e={})[d]=function(){return t.values()},e.next=function(){var e=r.next();return e.done?e:{done:!1,value:t.get(e.value)}},e},r.entries=function(){var e,t=this,r=this.keys();return(e={})[d]=function(){return t.entries()},e.next=function(){var e=r.next();if(e.done)return e;var n=t.get(e.value);return{done:!1,value:[e.value,n]}},e},r[d]=function(){return this.entries()},t}(Map);function Z(e){e.copy||(e.assigned=new Map,e.copy=new Map(e.base))}var Q=function(e){if(!e)throw new Error("Set is not polyfilled");function t(e,t){return this[u]={type:o.Set,parent:t,scope:t?t.scope:S.current,modified:!1,finalized:!1,copy:void 0,base:e,draft:this,drafts:new Map,revoked:!1,isManual:!1},this}p(t,e);var r=t.prototype;return Object.defineProperty(r,"size",{get:function(){return j(this[u]).size},enumerable:!0,configurable:!0}),r.has=function(e){var t=this[u];return U(t),t.copy?!!t.copy.has(e)||!(!t.drafts.has(e)||!t.copy.has(t.drafts.get(e))):t.base.has(e)},r.add=function(e){var t=this[u];return U(t),t.copy?t.copy.add(e):t.base.has(e)||(ee(t),t.scope.immer.markChanged(t),t.copy.add(e)),this},r.delete=function(e){if(!this.has(e))return!1;var t=this[u];return U(t),ee(t),t.scope.immer.markChanged(t),t.copy.delete(e)||!!t.drafts.has(e)&&t.copy.delete(t.drafts.get(e))},r.clear=function(){var e=this[u];return U(e),ee(e),e.scope.immer.markChanged(e),e.copy.clear()},r.values=function(){var e=this[u];return U(e),ee(e),e.copy.values()},r.entries=function(){var e=this[u];return U(e),ee(e),e.copy.entries()},r.keys=function(){return this.values()},r[d]=function(){return this.values()},r.forEach=function(e,t){for(var r=this.values(),n=r.next();!n.done;)e.call(t,n.value,n.value,this),n=r.next()},t}(Set);function ee(e){e.copy||(e.copy=new Set,e.base.forEach(function(t){if(v(t)){var r=e.scope.immer.createProxy(t,e);e.drafts.set(t,r),e.copy.add(r)}else e.copy.add(t)}))}function te(e,t){return t.forEach(function(t){var r=t.path,o=t.op;r.length||C();for(var a=e,i=0;i<r.length-1;i++)if(!(a=w(a,r[i]))||"object"!=typeof a)throw new Error("Cannot apply patch, path doesn't resolve: "+r.join("/"));var s=y(a),l=re(t.value),c=r[r.length-1];switch(o){case"replace":switch(s){case n.Map:return a.set(c,l);case n.Set:throw new Error('Sets cannot have "replace" patches.');default:return a[c]=l}case"add":switch(s){case n.Array:return a.splice(c,0,l);case n.Map:return a.set(c,l);case n.Set:return a.add(l);default:return a[c]=l}case"remove":switch(s){case n.Array:return a.splice(c,1);case n.Map:return a.delete(c);case n.Set:return a.delete(t.value);default:return delete a[c]}default:throw new Error("Unsupported patch operation: "+o)}}),e}function re(e){if(!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(re);if(x(e))return new Map(Array.from(e.entries()).map(function(e){return[e[0],re(e[1])]}));if(E(e))return new Set(Array.from(e).map(re));var t=Object.create(Object.getPrototypeOf(e));for(var r in e)t[r]=re(e[r]);return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function ne(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)n[o]=a[i];return n}var oe={useProxies:"undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,autoFreeze:void 0===process&&"verifyMinified"===function(){}.name,onAssign:null,onDelete:null,onCopy:null},ae=new(function(){function e(e){var t=this;this.useProxies=!1,this.autoFreeze=!1,m(oe,function(r,n){var o,a;t[r]=null!=(a=null===(o=e)||void 0===o?void 0:o[r])?a:n}),this.setUseProxies(this.useProxies),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}return e.prototype.produce=function(e,t,r){var n,o=this;if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var i=this;return function(e){var r=arguments,n=this;void 0===e&&(e=a);for(var o=[],s=1;s<arguments.length;s++)o[s-1]=r[s];return i.produce(e,function(e){return t.call.apply(t,ne([n,e],o))})}}if("function"!=typeof t)throw new Error("The first or second argument to `produce` must be a function");if(void 0!==r&&"function"!=typeof r)throw new Error("The third argument to `produce` must be a function or undefined");if(v(e)){var s=S.enter(this),c=this.createProxy(e,void 0),u=!0;try{n=t(c),u=!1}finally{u?s.revoke():s.leave()}return"undefined"!=typeof Promise&&n instanceof Promise?n.then(function(e){return s.usePatches(r),D(o,e,s)},function(e){throw s.revoke(),e}):(s.usePatches(r),D(this,n,s))}if((n=t(e))!==l)return void 0===n&&(n=e),N(this,n,!0),n},e.prototype.produceWithPatches=function(e,t,r){var n,o,a=this;return"function"==typeof e?function(t){for(var r=arguments,n=[],o=1;o<arguments.length;o++)n[o-1]=r[o];return a.produceWithPatches(t,function(t){return e.apply(void 0,ne([t],n))})}:(r&&C(),[this.produce(e,t,function(e,t){n=e,o=t}),n,o])},e.prototype.createDraft=function(e){if(!v(e))throw new Error("First argument to `createDraft` must be a plain object, an array, or an immerable object");var t=S.enter(this),r=this.createProxy(e,void 0);return r[u].isManual=!0,t.leave(),r},e.prototype.finishDraft=function(e,t){var r=e&&e[u];if(!r||!r.isManual)throw new Error("First argument to `finishDraft` must be a draft returned by `createDraft`");if(r.finalized)throw new Error("The given draft is already finalized");var n=r.scope;return n.usePatches(t),D(this,void 0,n)},e.prototype.setAutoFreeze=function(e){this.autoFreeze=e},e.prototype.setUseProxies=function(e){this.useProxies=e},e.prototype.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}return h(e)?te(e,t):this.produce(e,function(e){return te(e,t.slice(r+1))})},e.prototype.createProxy=function(e,t){var r=x(e)?function(e,t){return new G(e,t)}(e,t):E(e)?function(e,t){return new Q(e,t)}(e,t):this.useProxies?function(e,t){var r=Array.isArray(e),n={type:r?o.ProxyArray:o.ProxyObject,scope:t?t.scope:S.current,modified:!1,finalized:!1,assigned:{},parent:t,base:e,draft:null,drafts:{},copy:null,revoke:null,isManual:!1},a=n,i=M;r&&(a=[n],i=T);var s=Proxy.revocable(a,i),l=s.revoke,c=s.proxy;return n.draft=c,n.revoke=l,c}(e,t):W(e,t);return(t?t.scope:S.current).drafts.push(r),r},e.prototype.willFinalize=function(e,t,r){this.useProxies||z(e,t,r)},e.prototype.markChanged=function(e){this.useProxies?I(e):V(e)},e}()),ie=ae.produce,se=(ae.produceWithPatches.bind(ae),ae.setAutoFreeze.bind(ae),ae.setUseProxies.bind(ae),ae.applyPatches.bind(ae),ae.createDraft.bind(ae)),le=ae.finishDraft.bind(ae)}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/is-hotkey/lib/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var n="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),o={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:n?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},s=1;s<20;s++)i["f"+s]=111+s;function l(e,t,r){!t||"byKey"in t||(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map(function(e){return c(e,t)}),o=function(e){return n.some(function(t){return u(t,e)})};return null==r?o:o(r)}function c(e,t){var r=t&&t.byKey,n={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var s in o)n[o[s]]=!1;var l=!0,c=!1,u=void 0;try{for(var p,h=a[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var v=p.value,g=v.endsWith("?")&&v.length>1;g&&(v=v.slice(0,-1));var m=f(v),y=o[m];1!==i&&y||(r?n.key=m:n.which=d(v)),y&&(n[y]=!g||null)}}catch(e){c=!0,u=e}finally{try{!l&&h.return&&h.return()}finally{if(c)throw u}}return n}function u(e,t){for(var r in e){var n=e[r],o=void 0;if(null!=n&&((null!=(o="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&o!==n))return!1}return!0}function d(e){return e=f(e),i[e]||e.toUpperCase().charCodeAt(0)}function f(e){return e=e.toLowerCase(),e=a[e]||e}t.default=l,t.isHotkey=l,t.isCodeHotkey=function(e,t){return l(e,t)},t.isKeyHotkey=function(e,t){return l(e,{byKey:!0},t)},t.parseHotkey=c,t.compareHotkey=u,t.toKeyCode=d,t.toKeyName=f},"./node_modules/lodash/_Symbol.js":function(e,t,r){var n=r("./node_modules/lodash/_root.js").Symbol;e.exports=n},"./node_modules/lodash/_baseGetTag.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=r("./node_modules/lodash/_getRawTag.js"),a=r("./node_modules/lodash/_objectToString.js"),i="[object Null]",s="[object Undefined]",l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:i:l&&l in Object(e)?o(e):a(e)}},"./node_modules/lodash/_freeGlobal.js":function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/lodash/_getRawTag.js":function(e,t,r){var n=r("./node_modules/lodash/_Symbol.js"),o=Object.prototype,a=o.hasOwnProperty,i=o.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var o=i.call(e);return n&&(t?e[s]=r:delete e[s]),o}},"./node_modules/lodash/_objectToString.js":function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},"./node_modules/lodash/_root.js":function(e,t,r){var n=r("./node_modules/lodash/_freeGlobal.js"),o="object"==typeof self&&self&&self.Object===Object&&self,a=n||o||Function("return this")();e.exports=a},"./node_modules/lodash/debounce.js":function(e,t,r){var n=r("./node_modules/lodash/isObject.js"),o=r("./node_modules/lodash/now.js"),a=r("./node_modules/lodash/toNumber.js"),i="Expected a function",s=Math.max,l=Math.min;e.exports=function(e,t,r){var c,u,d,f,p,h,v=0,g=!1,m=!1,y=!0;if("function"!=typeof e)throw new TypeError(i);function b(t){var r=c,n=u;return c=u=void 0,v=t,f=e.apply(n,r)}function w(e){var r=e-h;return void 0===h||r>=t||r<0||m&&e-v>=d}function O(){var e=o();if(w(e))return x(e);p=setTimeout(O,function(e){var r=t-(e-h);return m?l(r,d-(e-v)):r}(e))}function x(e){return p=void 0,y&&c?b(e):(c=u=void 0,f)}function E(){var e=o(),r=w(e);if(c=arguments,u=this,h=e,r){if(void 0===p)return function(e){return v=e,p=setTimeout(O,t),g?b(e):f}(h);if(m)return clearTimeout(p),p=setTimeout(O,t),b(h)}return void 0===p&&(p=setTimeout(O,t)),f}return t=a(t)||0,n(r)&&(g=!!r.leading,d=(m="maxWait"in r)?s(a(r.maxWait)||0,t):d,y="trailing"in r?!!r.trailing:y),E.cancel=function(){void 0!==p&&clearTimeout(p),v=0,c=h=u=p=void 0},E.flush=function(){return void 0===p?f:x(o())},E}},"./node_modules/lodash/isObject.js":function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},"./node_modules/lodash/isObjectLike.js":function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},"./node_modules/lodash/isSymbol.js":function(e,t,r){var n=r("./node_modules/lodash/_baseGetTag.js"),o=r("./node_modules/lodash/isObjectLike.js"),a="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||o(e)&&n(e)==a}},"./node_modules/lodash/now.js":function(e,t,r){var n=r("./node_modules/lodash/_root.js");e.exports=function(){return n.Date.now()}},"./node_modules/lodash/throttle.js":function(e,t,r){var n=r("./node_modules/lodash/debounce.js"),o=r("./node_modules/lodash/isObject.js"),a="Expected a function";e.exports=function(e,t,r){var i=!0,s=!0;if("function"!=typeof e)throw new TypeError(a);return o(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),n(e,t,{leading:i,maxWait:t,trailing:s})}},"./node_modules/lodash/toNumber.js":function(e,t,r){var n=r("./node_modules/lodash/isObject.js"),o=r("./node_modules/lodash/isSymbol.js"),a=NaN,i=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var r=l.test(e);return r||c.test(e)?u(e.slice(2),r?2:8):s.test(e)?a:+e}},"./node_modules/object-assign/index.js":function(e,t,r){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function i(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,l=i(e),c=1;c<arguments.length;c++){for(var u in r=Object(arguments[c]))o.call(r,u)&&(l[u]=r[u]);if(n){s=n(r);for(var d=0;d<s.length;d++)a.call(r,s[d])&&(l[s[d]]=r[s[d]])}}return l}},"./node_modules/process/browser.js":function(e,t){var r,n,process=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,l=[],c=!1,u=-1;function d(){c&&s&&(c=!1,s.length?l=s.concat(l):u=-1,l.length&&f())}function f(){if(!c){var e=i(d);c=!0;for(var t=l.length;t;){for(s=l,l=[];++u<t;)s&&s[u].run();u=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||c||i(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=h,process.addListener=h,process.once=h,process.off=h,process.removeListener=h,process.removeAllListeners=h,process.emit=h,process.prependListener=h,process.prependOnceListener=h,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},"./node_modules/use-subscription/cjs/use-subscription.production.min.js":function(e,t,r){"use strict";
/** @license React vundefined
 * use-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r("./node_modules/object-assign/index.js"),o=r("react");t.useSubscription=function(e){var t=e.getCurrentValue,r=e.subscribe,a=o.useState(function(){return{getCurrentValue:t,subscribe:r,value:t()}});e=a[0];var i=a[1];return a=e.value,e.getCurrentValue===t&&e.subscribe===r||(a=t(),i({getCurrentValue:t,subscribe:r,value:a})),o.useDebugValue(a),o.useEffect(function(){function e(){if(!o){var e=t();i(function(o){return o.getCurrentValue!==t||o.subscribe!==r||o.value===e?o:n({},o,{value:e})})}}var o=!1,a=r(e);return e(),function(){o=!0,a()}},[t,r]),a}},"./node_modules/use-subscription/index.js":function(e,t,r){"use strict";e.exports=r("./node_modules/use-subscription/cjs/use-subscription.production.min.js")},"./node_modules/webpack/buildin/global.js":function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},"./node_modules/webpack/buildin/module.js":function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},"./src/routes/demos/slate-collabo/src/index.tsx":function(e,t,r){"use strict";r.r(t);var n=r("react"),o=r.n(n),a=r("./node_modules/rxjs/_esm5/internal/Subject.js");
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function i(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}var s=function(e){var t,r;return!1!==i(e)&&("function"==typeof(t=e.constructor)&&(!1!==i(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))},l=r("./node_modules/esrever/esrever.js"),c=r("./node_modules/immer/dist/immer.module.js");function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=new WeakMap,p=new WeakMap,h=new WeakMap,v=new WeakMap,g=new WeakMap,m=new WeakMap,y=/\s/,b=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,w=/['\u2018\u2019]/,O=e=>{for(var t=0,r=null,n=e.charCodeAt(0);n;)if(E(n)){var o=j(n,e,t);if("SURR"===r||"BMP"===r)break;t+=2,r=o?"MOD":"SURR",n=e.charCodeAt(t)}else if(8205!==n)if(P(n)){if(r&&"ZWJ"!==r&&"VAR"!==r)break;t+=1,r="BMP",n=e.charCodeAt(t)}else{if(!k(n)){if("MOD"===r){t+=1;break}break}if(r&&"ZWJ"!==r)break;t+=1,r="VAR",n=e.charCodeAt(t)}else t+=1,r="ZWJ",n=e.charCodeAt(t);return t||1},x=(e,t)=>{if(y.test(e))return!1;if(w.test(e)){var r=t.charAt(0),n=O(r);r=t.slice(0,n);var o=t.slice(n);if(x(r,o))return!0}return!b.test(e)},E=e=>55296<=e&&e<=57343,j=(e,t,r)=>{if(55356===e){var n=t.charCodeAt(r+1);return n<=57343&&n>=57339}return!1},k=e=>e<=65039&&e>=65024,P=e=>10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e;function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var S={above(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:o=e.selection,match:a}=t;if(o){var i=S.path(e,o),s="lowest"===n;for(var[l,c]of S.levels(e,{at:i,voids:r,match:a,reverse:s}))if(!J.isText(l)&&!T.equals(i,c))return[l,c]}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:S.point(e,t,{edge:"end"}),focus:S.end(e,[])},{distance:a=1}=n,i=0;for(var s of S.positions(e,C({},n,{at:o}))){if(i>a)break;0!==i&&(r=s),i++}return r},before(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o={anchor:S.start(e,[]),focus:S.point(e,t,{edge:"start"})},{distance:a=1}=n,i=0;for(var s of S.positions(e,C({},n,{at:o,reverse:!0}))){if(i>a)break;0!==i&&(r=s),i++}return r},deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e){e.deleteFragment()},edges:(e,t)=>[S.start(e,t),S.end(e,t)],end:(e,t)=>S.point(e,t,{edge:"end"}),first(e,t){var r=S.path(e,t,{edge:"start"});return S.node(e,r)},fragment(e,t){var r=S.range(e,t);return _.fragment(e,r)},hasBlocks:(e,t)=>t.children.some(t=>S.isBlock(e,t)),hasInlines:(e,t)=>t.children.some(t=>J.isText(t)||S.isInline(e,t)),hasTexts:(e,t)=>t.children.every(e=>J.isText(e)),insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>A.isElement(t)&&!e.isInline(t),isEditor:e=>s(e)&&"function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||s(e.marks))&&(null===e.selection||q.isRange(e.selection))&&_.isNodeList(e.children)&&M.isOperationList(e.operations),isEnd(e,t,r){var n=S.end(e,r);return L.equals(t,n)},isEdge:(e,t,r)=>S.isStart(e,t,r)||S.isEnd(e,t,r),isEmpty(e,t){var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&J.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:(e,t)=>A.isElement(t)&&e.isInline(t),isNormalizing(e){var t=h.get(e);return void 0===t||t},isStart(e,t,r){if(0!==t.offset)return!1;var n=S.start(e,r);return L.equals(t,n)},isVoid:(e,t)=>A.isElement(t)&&e.isVoid(t),last(e,t){var r=S.path(e,t,{edge:"end"});return S.node(e,r)},leaf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r);return[_.leaf(e,n),n]},*levels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:o=!1}=t,{match:a}=t;if(null==a&&(a=()=>!0),r){var i=[],s=S.path(e,r);for(var[l,c]of _.levels(e,s))if(a(l)&&(i.push([l,c]),!o&&S.isVoid(e,l)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:r}=e;if(!r)return null;if(t)return t;if(q.isExpanded(r)){var[n]=S.nodes(e,{match:J.isText});if(n){var[o]=n;return d(o,["text"])}return{}}var{anchor:a}=r,{path:i}=a,[s]=S.leaf(e,i);if(0===a.offset){var l=S.previous(e,{at:i,match:J.isText}),c=S.above(e,{match:t=>S.isBlock(e,t)});if(l&&c){var[u,f]=l,[,p]=c;T.isAncestor(p,f)&&(s=u)}}return d(s,["text"])},next(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection}=t;if(a){var[,i]=S.last(e,a),[,s]=S.last(e,[]),l=[i,s];if(T.isPath(a)&&0===a.length)throw new Error("Cannot get the next node from the root node!");if(null==o)if(T.isPath(a)){var[c]=S.parent(e,a);o=e=>c.children.includes(e)}else o=()=>!0;var[,u]=S.nodes(e,{at:l,match:o,mode:r,voids:n});return u}},node(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r);return[_.get(e,n),n]},*nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,mode:n="all",universal:o=!1,reverse:a=!1,voids:i=!1}=t,{match:s}=t;if(s||(s=()=>!0),r){var l,c;if(D.isSpan(r))l=r[0],c=r[1];else{var u=S.path(e,r,{edge:"start"}),d=S.path(e,r,{edge:"end"});l=a?d:u,c=a?u:d}var f,p=_.nodes(e,{reverse:a,from:l,to:c,pass:t=>{var[r]=t;return!i&&S.isVoid(e,r)}}),h=[];for(var[v,g]of p){var m=f&&0===T.compare(g,f[1]);if("highest"!==n||!m)if(s(v))if("lowest"===n&&m)f=[v,g];else{var y="lowest"===n?f:[v,g];y&&(o?h.push(y):yield y),f=[v,g]}else if(o&&!m&&J.isText(v))return}"lowest"===n&&f&&(o?h.push(f):yield f),o&&(yield*h)}},normalize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1}=t,n=e=>f.get(e)||[];if(S.isNormalizing(e)){if(r){var o=Array.from(_.nodes(e),e=>{var[,t]=e;return t});f.set(e,o)}0!==n(e).length&&S.withoutNormalizing(e,()=>{for(var t=42*n(e).length,r=0;0!==n(e).length;){if(r>t)throw new Error("\n            Could not completely normalize the editor after ".concat(t," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var o=n(e).pop(),a=S.node(e,o);e.normalizeNode(a),r++}})}},parent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S.path(e,t,r),o=T.parent(n);return S.node(e,o)},path(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:o}=r;if(T.isPath(t))if("start"===o){var[,a]=_.first(e,t);t=a}else if("end"===o){var[,i]=_.last(e,t);t=i}return q.isRange(t)&&(t="start"===o?q.start(t):"end"===o?q.end(t):T.common(t.anchor.path,t.focus.path)),L.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},pathRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.pathRefs(e).delete(o),o.current=null,t}};return S.pathRefs(e).add(o),o},pathRefs(e){var t=v.get(e);return t||(t=new Set,v.set(e,t)),t},point(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(T.isPath(t)){var o;if("end"===n){var[,a]=_.last(e,t);o=a}else{var[,i]=_.first(e,t);o=i}var s=_.get(e,o);if(!J.isText(s))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:o,offset:"end"===n?s.text.length:0}}if(q.isRange(t)){var[l,c]=q.edges(t);return"start"===n?l:c}return t},pointRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.pointRefs(e).delete(o),o.current=null,t}};return S.pointRefs(e).add(o),o},pointRefs(e){var t=g.get(e);return t||(t=new Set,g.set(e,t)),t},*positions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,unit:n="offset",reverse:o=!1}=t;if(r){var a=S.range(e,r),[i,s]=q.edges(a),c=o?s:i,u="",d=0,f=0,p=null,h=!1,v=()=>{null==p&&(p="character"===n?O(u):"word"===n?(e=>{for(var t,r=0,n=0,o=!1;t=e.charAt(n);){var a=O(t);t=e.slice(n,n+a);var i=e.slice(n+a);if(x(t,i))o=!0,r+=a;else{if(o)break;r+=a}n+=a}return r})(u):"line"===n||"block"===n?u.length:1,u=u.slice(p)),f=o?f-p:f+p,p=(d-=p)>=0?null:0-d};for(var[g,m]of S.nodes(e,{at:r,reverse:o})){if(A.isElement(g)){if(e.isVoid(g)){yield S.start(e,m);continue}if(e.isInline(g))continue;if(S.hasInlines(e,g)){var y=T.isAncestor(m,s.path)?s:S.end(e,m),b=T.isAncestor(m,i.path)?i:S.start(e,m),w=S.string(e,{anchor:b,focus:y});u=o?Object(l.reverse)(w):w,h=!0}}if(J.isText(g)){var E=T.equals(m,c.path);for(d=g.text.length,f=o?d:0,E&&(d=o?c.offset:d-c.offset,f=c.offset),(E||h||"offset"===n)&&(yield{path:m,offset:f});""!==u&&(v(),d>=0);)yield{path:m,offset:f};h=!1}}}},previous(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection}=t;if(a){var[,i]=S.first(e,a),[,s]=S.first(e,[]),l=[i,s];if(T.isPath(a)&&0===a.length)throw new Error("Cannot get the previous node from the root node!");if(null==o)if(T.isPath(a)){var[c]=S.parent(e,a);o=e=>c.children.includes(e)}else o=()=>!0;var[,u]=S.nodes(e,{reverse:!0,at:l,match:o,mode:r,voids:n});return u}},range:(e,t,r)=>q.isRange(t)&&!r?t:{anchor:S.start(e,t),focus:S.end(e,r||t)},rangeRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,o={current:t,affinity:n,unref(){var{current:t}=o;return S.rangeRefs(e).delete(o),o.current=null,t}};return S.rangeRefs(e).add(o),o},rangeRefs(e){var t=m.get(e);return t||(t=new Set,m.set(e,t)),t},removeMark(e,t){e.removeMark(t)},start:(e,t)=>S.point(e,t,{edge:"start"}),string(e,t){var r=S.range(e,t),[n,o]=q.edges(r),a="";for(var[i,s]of S.nodes(e,{at:r,match:J.isText})){var l=i.text;T.equals(s,o.path)&&(l=l.slice(0,o.offset)),T.equals(s,n.path)&&(l=l.slice(n.offset)),a+=l}return a},unhangRange(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[o,a]=q.edges(t);if(0!==o.offset||0!==a.offset||q.isCollapsed(t))return t;var i=S.above(e,{at:a,match:t=>S.isBlock(e,t)}),s=i?i[1]:[],l={anchor:S.start(e,[]),focus:a},c=!0;for(var[u,d]of S.nodes(e,{at:l,match:J.isText,reverse:!0,voids:n}))if(c)c=!1;else if(""!==u.text||T.isBefore(d,s)){a={path:d,offset:u.text.length};break}return{anchor:o,focus:a}},void(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return S.above(e,C({},t,{match:t=>S.isVoid(e,t)}))},withoutNormalizing(e,t){var r=S.isNormalizing(e);h.set(e,!1),t(),h.set(e,r),S.normalize(e)}},A={isElement:e=>s(e)&&_.isNodeList(e.children)&&!S.isEditor(e),isElementList:e=>Array.isArray(e)&&(0===e.length||A.isElement(e[0])),matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},D={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(T.isPath)},_={ancestor(e,t){var r=_.get(e,t);if(J.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},*ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of T.ancestors(t,r)){var o=[_.ancestor(e,n),n];yield o}},child(e,t){if(J.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},*children(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:n=!1}=r,o=_.ancestor(e,t),{children:a}=o,i=n?a.length-1:0;n?i>=0:i<a.length;){var s=_.child(o,i),l=t.concat(i);yield[s,l],i=n?i-1:i+1}},common(e,t,r){var n=T.common(t,r);return[_.get(e,n),n]},descendant(e,t){var r=_.get(e,t);if(S.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},*descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of _.nodes(e,t))0!==n.length&&(yield[r,n])},*elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of _.nodes(e,t))A.isElement(r)&&(yield[r,n])},first(e,t){for(var r=t.slice(),n=_.get(e,r);n&&!J.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(J.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return Object(c.d)(e,e=>{var[r,n]=q.edges(t),o=_.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!q.includes(t,r)}});for(var[,a]of o){if(!q.includes(t,a)){var i=_.parent(e,a),s=a[a.length-1];i.children.splice(s,1)}if(T.equals(a,n.path)){var l=_.leaf(e,a);l.text=l.text.slice(0,n.offset)}if(T.equals(a,r.path)){var c=_.leaf(e,a);c.text=c.text.slice(r.offset)}}delete e.selection}).children},get(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(J.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(J.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode:e=>J.isText(e)||A.isElement(e)||S.isEditor(e),isNodeList:e=>Array.isArray(e)&&(0===e.length||_.isNode(e[0])),last(e,t){for(var r=t.slice(),n=_.get(e,r);n&&!J.isText(n)&&0!==n.children.length;){var o=n.children.length-1;n=n.children[o],r.push(o)}return[n,r]},leaf(e,t){var r=_.get(e,t);if(!J.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},*levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of T.levels(t,r)){var o=_.get(e,n);yield[o,n]}},matches:(e,t)=>A.isElement(e)&&A.matches(e,t)||J.isText(e)&&J.matches(e,t),*nodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:o=[],to:a}=t,i=new Set,s=[],l=e;!(a&&(n?T.isBefore(s,a):T.isAfter(s,a)));)if(i.has(l)||(yield[l,s]),i.has(l)||J.isText(l)||0===l.children.length||null!=r&&!1!==r([l,s])){if(0===s.length)break;if(!n){var c=T.next(s);if(_.has(e,c)){s=c,l=_.get(e,s);continue}}if(n&&0!==s[s.length-1])s=T.previous(s),l=_.get(e,s);else s=T.parent(s),l=_.get(e,s),i.add(l)}else{i.add(l);var u=n?l.children.length-1:0;T.isAncestor(s,o)&&(u=o[s.length]),s=s.concat(u),l=_.get(e,s)}},parent(e,t){var r=T.parent(t),n=_.get(e,r);if(J.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>J.isText(e)?e.text:e.children.map(_.string).join(""),*texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of _.nodes(e,t))J.isText(r)&&(yield[r,n])}};function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var M={isNodeOperation:e=>M.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!s(e))return!1;switch(e.type){case"insert_node":return T.isPath(e.path)&&_.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&T.isPath(e.path);case"merge_node":return"number"==typeof e.position&&T.isPath(e.path)&&s(e.properties);case"move_node":return T.isPath(e.path)&&T.isPath(e.newPath);case"remove_node":return T.isPath(e.path)&&_.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&T.isPath(e.path);case"set_node":return T.isPath(e.path)&&s(e.properties)&&s(e.newProperties);case"set_selection":return null===e.properties&&q.isRange(e.newProperties)||null===e.newProperties&&q.isRange(e.properties)||s(e.properties)&&s(e.newProperties);case"split_node":return T.isPath(e.path)&&"number"==typeof e.position&&s(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&(0===e.length||M.isOperation(e[0])),isSelectionOperation:e=>M.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>M.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return N({},e,{type:"remove_node"});case"insert_text":return N({},e,{type:"remove_text"});case"merge_node":return N({},e,{type:"split_node",path:T.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;return T.equals(t,r)?e:T.isSibling(r,t)?N({},e,{path:t,newPath:r}):N({},e,{path:T.transform(r,e),newPath:T.transform(T.next(r),e)});case"remove_node":return N({},e,{type:"insert_node"});case"remove_text":return N({},e,{type:"insert_text"});case"set_node":var{properties:n,newProperties:o}=e;return N({},e,{properties:o,newProperties:n});case"set_selection":var{properties:a,newProperties:i}=e;return N({},e,null==a?{properties:i,newProperties:null}:null==i?{properties:null,newProperties:a}:{properties:i,newProperties:a});case"split_node":return N({},e,{type:"merge_node",path:T.next(e.path)})}}},T={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=T.levels(e,t);return n=r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),a=e[r],i=t[r];return T.equals(n,o)&&a>i},endsAt(e,t){var r=e.length,n=e.slice(0,r),o=t.slice(0,r);return T.equals(n,o)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),a=e[r],i=t[r];return T.equals(n,o)&&a<i},equals:(e,t)=>e.length===t.length&&e.every((e,r)=>e===t[r]),isAfter:(e,t)=>1===T.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===T.compare(e,t),isBefore:(e,t)=>-1===T.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===T.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===T.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===T.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===T.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&T.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],o=0;o<=e.length;o++)n.push(e.slice(0,o));return r&&n.reverse(),n},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!T.isAncestor(t,e)&&!T.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(c.d)(e,n=>{var{affinity:o="forward"}=r;if(0!==e.length)switch(t.type){case"insert_node":var{path:a}=t;(T.equals(a,n)||T.endsBefore(a,n)||T.isAncestor(a,n))&&(n[a.length-1]+=1);break;case"remove_node":var{path:i}=t;if(T.equals(i,n)||T.isAncestor(i,n))return null;T.endsBefore(i,n)&&(n[i.length-1]-=1);break;case"merge_node":var{path:s,position:l}=t;T.equals(s,n)||T.endsBefore(s,n)?n[s.length-1]-=1:T.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=l);break;case"split_node":var{path:c,position:u}=t;if(T.equals(c,n)){if("forward"===o)n[n.length-1]+=1;else if("backward"!==o)return null}else T.endsBefore(c,n)?n[c.length-1]+=1:T.isAncestor(c,n)&&e[c.length]>=u&&(n[c.length-1]+=1,n[c.length]-=u);break;case"move_node":var{path:d,newPath:f}=t;if(T.equals(d,f))return;if(T.isAncestor(d,n)||T.equals(d,n)){var p=f.slice();return T.endsBefore(d,f)&&d.length<f.length&&(p[d.length-1]-=1),p.concat(n.slice(d.length))}T.isSibling(d,f)&&(T.isAncestor(f,n)||T.equals(f,n))?T.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:T.endsBefore(f,n)||T.equals(f,n)||T.isAncestor(f,n)?(T.endsBefore(d,n)&&(n[d.length-1]-=1),n[f.length-1]+=1):T.endsBefore(d,n)&&(T.equals(f,n)&&(n[f.length-1]+=1),n[d.length-1]-=1)}})}},R={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=T.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var L={compare(e,t){var r=T.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===L.compare(e,t),isBefore:(e,t)=>-1===L.compare(e,t),equals:(e,t)=>e.offset===t.offset&&T.equals(e.path,t.path),isPoint:e=>s(e)&&"number"==typeof e.offset&&T.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(c.d)(e,e=>{var{affinity:n="forward"}=r,{path:o,offset:a}=e;switch(t.type){case"insert_node":case"move_node":e.path=T.transform(o,t,r);break;case"insert_text":T.equals(t.path,o)&&t.offset<=a&&(e.offset+=t.text.length);break;case"merge_node":T.equals(t.path,o)&&(e.offset+=t.position),e.path=T.transform(o,t,r);break;case"remove_text":T.equals(t.path,o)&&t.offset<=a&&(e.offset-=Math.min(a-t.offset,t.text.length));break;case"remove_node":if(T.equals(t.path,o)||T.isAncestor(t.path,o))return null;e.path=T.transform(o,t,r);break;case"split_node":if(T.equals(t.path,o)){if(t.position===a&&null==n)return null;(t.position<a||t.position===a&&"forward"===n)&&(e.offset-=t.position,e.path=T.transform(o,t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r,{affinity:"forward"})))}else e.path=T.transform(o,t,r)}})}},z={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=L.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var q={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:o}=e;return q.isBackward(e)===r?[n,o]:[o,n]},end(e){var[,t]=q.edges(e);return t},equals:(e,t)=>L.equals(e.anchor,t.anchor)&&L.equals(e.focus,t.focus),includes(e,t){if(q.isRange(t)){if(q.includes(e,t.anchor)||q.includes(e,t.focus))return!0;var[r,n]=q.edges(e),[o,a]=q.edges(t);return L.isBefore(r,o)&&L.isAfter(n,a)}var[i,s]=q.edges(e),l=!1,c=!1;return L.isPoint(t)?(l=L.compare(t,i)>=0,c=L.compare(t,s)<=0):(l=T.compare(t,i.path)>=0,c=T.compare(t,s.path)<=0),l&&c},intersection(e,t){var r=d(e,["anchor","focus"]),[n,o]=q.edges(e),[a,i]=q.edges(t),s=L.isBefore(n,a)?a:n,l=L.isBefore(o,i)?o:i;return L.isBefore(l,s)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({anchor:s,focus:l},r)},isBackward(e){var{anchor:t,focus:r}=e;return L.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return L.equals(t,r)},isExpanded:e=>!q.isCollapsed(e),isForward:e=>!q.isBackward(e),isRange:e=>s(e)&&L.isPoint(e.anchor)&&L.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=q.edges(e);return t},transform(e,t){var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:a="inward"}=o;return"inward"===a?q.isForward(e)?(r="forward",n="backward"):(r="backward",n="forward"):"outward"===a?q.isForward(e)?(r="backward",n="forward"):(r="forward",n="backward"):(r=a,n=a),Object(c.d)(e,e=>{var o=L.transform(e.anchor,t,{affinity:r}),a=L.transform(e.focus,t,{affinity:n});if(!o||!a)return null;e.anchor=o,e.focus=a})}},V={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var o=q.transform(r,t,{affinity:n});e.current=o,null==o&&e.unref()}}};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var J={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;for(var o in e)if((!n||"text"!==o)&&e[o]!==t[o])return!1;for(var a in t)if((!n||"text"!==a)&&e[a]!==t[a])return!1;return!0},isText:e=>s(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&(0===e.length||J.isText(e[0])),matches(e,t){for(var r in t)if("text"!==r&&e[r]!==t[r])return!1;return!0},decorations(e,t){var r=[K({},e)];for(var n of t){var o=d(n,["anchor","focus"]),[a,i]=q.edges(n),s=[],l=0;for(var c of r){var{length:u}=c.text,f=l;if(l+=u,a.offset<=f&&i.offset>=f+u)Object.assign(c,o),s.push(c);else if(a.offset>f+u||i.offset<f||i.offset===f&&0!==f)s.push(c);else{var p=c,h=void 0,v=void 0;if(i.offset<f+u){var g=i.offset-f;v=K({},p,{text:p.text.slice(g)}),p=K({},p,{text:p.text.slice(0,g)})}if(a.offset>f){var m=a.offset-f;h=K({},p,{text:p.text.slice(0,m)}),p=K({},p,{text:p.text.slice(m)})}Object.assign(p,o),h&&s.push(h),s.push(p),v&&s.push(v)}}r=s}return r}};function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var G={insertNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1,mode:a="lowest"}=r,{at:i,match:s,select:l}=r;if(_.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(i||(i=e.selection?e.selection:e.children.length>0?S.end(e,[]):[0],l=!0),null==l&&(l=!1),q.isRange(i))if(n||(i=S.unhangRange(e,i)),q.isCollapsed(i))i=i.anchor;else{var[,u]=q.edges(i),d=S.pointRef(e,u);ne.delete(e,{at:i}),i=d.unref()}if(L.isPoint(i)){null==s&&(s=J.isText(c)?e=>J.isText(e):e.isInline(c)?t=>J.isText(t)||S.isInline(e,t):t=>S.isBlock(e,t));var[f]=S.nodes(e,{at:i.path,match:s,mode:a,voids:o});if(!f)return;var[,p]=f,h=S.pathRef(e,p),v=S.isEnd(e,i,p);ne.splitNodes(e,{at:i,match:s,mode:a,voids:o});var g=h.unref();i=v?T.next(g):g}var m=T.parent(i),y=i[i.length-1];if(o||!S.void(e,{at:m})){for(var b of t){var w=m.concat(y);y++,e.apply({type:"insert_node",path:w,node:b})}if(l){var O=S.end(e,i);O&&ne.select(e,O)}}}})},liftNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{at:r=e.selection,mode:n="lowest",voids:o=!1}=t,{match:a}=t;if(null==a&&(a=T.isPath(r)?Q(e,r):t=>S.isBlock(e,t)),r){var i=S.nodes(e,{at:r,match:a,mode:n,voids:o}),s=Array.from(i,t=>{var[,r]=t;return S.pathRef(e,r)});for(var l of s){var c=l.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var u=S.node(e,T.parent(c)),[d,f]=u,p=c[c.length-1],{length:h}=d.children;if(1===h){var v=T.next(f);ne.moveNodes(e,{at:c,to:v,voids:o}),ne.removeNodes(e,{at:f,voids:o})}else if(0===p)ne.moveNodes(e,{at:c,to:f,voids:o});else if(p===h-1){var g=T.next(f);ne.moveNodes(e,{at:c,to:g,voids:o})}else{var m=T.next(c),y=T.next(f);ne.splitNodes(e,{at:m,voids:o}),ne.moveNodes(e,{at:c,to:y,voids:o})}}}})},mergeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{match:r,at:n=e.selection}=t,{hanging:o=!1,voids:a=!1,mode:i="lowest"}=t;if(n){if(null==r)if(T.isPath(n)){var[s]=S.parent(e,n);r=e=>s.children.includes(e)}else r=t=>S.isBlock(e,t);if(!o&&q.isRange(n)&&(n=S.unhangRange(e,n)),q.isRange(n))if(q.isCollapsed(n))n=n.anchor;else{var[,l]=q.edges(n),c=S.pointRef(e,l);ne.delete(e,{at:n}),n=c.unref(),null==t.at&&ne.select(e,n)}var[u]=S.nodes(e,{at:n,match:r,voids:a,mode:i}),f=S.previous(e,{at:n,match:r,voids:a,mode:i});if(u&&f){var[p,h]=u,[v,g]=f;if(0!==h.length&&0!==g.length){var m,y,b=T.next(g),w=T.common(h,g),O=T.isSibling(h,g),x=Array.from(S.levels(e,{at:h}),e=>{var[t]=e;return t}).slice(w.length).slice(0,-1),E=S.above(e,{at:h,mode:"highest",match:e=>x.includes(e)&&A.isElement(e)&&1===e.children.length}),j=E&&S.pathRef(e,E[1]);if(J.isText(p)&&J.isText(v)){var k=d(p,["text"]);y=v.text.length,m=k}else{if(!A.isElement(p)||!A.isElement(v))throw new Error("Cannot merge the node at path [".concat(h,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(p)," ").concat(JSON.stringify(v)));k=d(p,["children"]);y=v.children.length,m=k}O||ne.moveNodes(e,{at:h,to:b,voids:a}),j&&ne.removeNodes(e,{at:j.current,voids:a}),A.isElement(v)&&S.isEmpty(e,v)||J.isText(v)&&""===v.text?ne.removeNodes(e,{at:g,voids:a}):e.apply({type:"merge_node",path:b,position:y,properties:m}),j&&j.unref()}}}})},moveNodes(e,t){S.withoutNormalizing(e,()=>{var{to:r,at:n=e.selection,mode:o="lowest",voids:a=!1}=t,{match:i}=t;if(n){null==i&&(i=T.isPath(n)?Q(e,n):t=>S.isBlock(e,t));var s=S.pathRef(e,r),l=S.nodes(e,{at:n,match:i,mode:o,voids:a}),c=Array.from(l,t=>{var[,r]=t;return S.pathRef(e,r)});for(var u of c){var d=u.unref(),f=s.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:f})}s.unref()}})},removeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{hanging:r=!1,voids:n=!1,mode:o="lowest"}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=T.isPath(a)?Q(e,a):t=>S.isBlock(e,t)),!r&&q.isRange(a)&&(a=S.unhangRange(e,a));var s=S.nodes(e,{at:a,match:i,mode:o,voids:n}),l=Array.from(s,t=>{var[,r]=t;return S.pathRef(e,r)});for(var c of l){var u=c.unref();if(u){var[d]=S.node(e,u);e.apply({type:"remove_node",path:u,node:d})}}}})},setNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{match:n,at:o=e.selection}=r,{hanging:a=!1,mode:i="lowest",split:s=!1,voids:l=!1}=r;if(o){if(null==n&&(n=T.isPath(o)?Q(e,o):t=>S.isBlock(e,t)),!a&&q.isRange(o)&&(o=S.unhangRange(e,o)),s&&q.isRange(o)){var c=S.rangeRef(e,o,{affinity:"inward"}),[u,d]=q.edges(o),f="lowest"===i?"lowest":"highest";ne.splitNodes(e,{at:d,match:n,mode:f,voids:l}),ne.splitNodes(e,{at:u,match:n,mode:f,voids:l}),o=c.unref(),null==r.at&&ne.select(e,o)}for(var[p,h]of S.nodes(e,{at:o,match:n,mode:i,voids:l})){var v={},g={};if(0!==h.length){for(var m in t)"children"!==m&&"text"!==m&&t[m]!==p[m]&&(v[m]=p[m],g[m]=t[m]);0!==Object.keys(g).length&&e.apply({type:"set_node",path:h,properties:v,newProperties:g})}}}})},splitNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{mode:r="lowest",voids:n=!1}=t,{match:o,at:a=e.selection,height:i=0,always:s=!1}=t;if(null==o&&(o=t=>S.isBlock(e,t)),q.isRange(a)&&(a=Z(e,a)),T.isPath(a)){var l=a,c=S.point(e,l),[u]=S.parent(e,l);o=e=>e===u,i=c.path.length-l.length+1,a=c,s=!0}if(a){var f=S.pointRef(e,a,{affinity:"backward"}),[p]=S.nodes(e,{at:a,match:o,mode:r,voids:n});if(p){var h=S.void(e,{at:a,mode:"highest"});if(!n&&h){var[v,g]=h;if(A.isElement(v)&&e.isInline(v)){var m=S.after(e,g);if(!m){var y=T.next(g);ne.insertNodes(e,{text:""},{at:y,voids:n}),m=S.point(e,y)}a=m,s=!0}i=a.path.length-g.length+1,s=!0}var b=S.pointRef(e,a),w=a.path.length-i,[,O]=p,x=a.path.slice(0,w),E=0===i?a.offset:a.path[w]+0;for(var[j,k]of S.levels(e,{at:x,reverse:!0,voids:n})){var P=!1;if(k.length<O.length||0===k.length||!n&&S.isVoid(e,j))break;var F=f.current,C=S.isEnd(e,F,k);if(s||!f||!S.isEdge(e,F,k)){P=!0;var D=d(j,["text","children"]);e.apply({type:"split_node",path:k,position:E,properties:D})}E=k[k.length-1]+(P||C?1:0)}if(null==t.at){var _=b.current||S.end(e,[]);ne.select(e,_)}f.unref(),b.unref()}}})},unsetNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var o of t)n[o]=null;ne.setNodes(e,n,r)},unwrapNodes(e,t){S.withoutNormalizing(e,()=>{var{mode:r="lowest",split:n=!1,voids:o=!1}=t,{at:a=e.selection,match:i}=t;if(a){null==i&&(i=T.isPath(a)?Q(e,a):t=>S.isBlock(e,t)),T.isPath(a)&&(a=S.range(e,a));var s=q.isRange(a)?S.rangeRef(e,a):null,l=S.nodes(e,{at:a,match:i,mode:r,voids:o}),c=Array.from(l,t=>{var[,r]=t;return S.pathRef(e,r)}),u=function(t){var r=t.unref(),[a]=S.node(e,r),i=S.range(e,r);n&&s&&(i=q.intersection(s.current,i)),ne.liftNodes(e,{at:i,match:e=>a.children.includes(e),voids:o})};for(var d of c)u(d);s&&s.unref()}})},wrapNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{mode:n="lowest",split:o=!1,voids:a=!1}=r,{match:i,at:s=e.selection}=r;if(s){if(null==i&&(i=T.isPath(s)?Q(e,s):e.isInline(t)?t=>S.isInline(e,t)||J.isText(t):t=>S.isBlock(e,t)),o&&q.isRange(s)){var[l,c]=q.edges(s),u=S.rangeRef(e,s,{affinity:"inward"});ne.splitNodes(e,{at:c,match:i,voids:a}),ne.splitNodes(e,{at:l,match:i,voids:a}),s=u.unref(),null==r.at&&ne.select(e,s)}var d=Array.from(S.nodes(e,{at:s,match:e.isInline(t)?t=>S.isBlock(e,t):e=>S.isEditor(e),mode:"lowest",voids:a}));for(var[,f]of d){var p=q.isRange(s)?q.intersection(s,S.range(e,f)):s;if(p){var h=Array.from(S.nodes(e,{at:p,match:i,mode:n,voids:a}));h.length>0&&function(){var[r]=h,n=h[h.length-1],[,o]=r,[,i]=n,s=T.equals(o,i)?T.parent(o):T.common(o,i),l=S.range(e,o,i),c=S.node(e,s),[u]=c,d=s.length+1,f=T.next(i.slice(0,d)),p=X({},t,{children:[]});ne.insertNodes(e,p,{at:f,voids:a}),ne.moveNodes(e,{at:l,match:e=>u.children.includes(e),to:f.concat(0),voids:a})}()}}}})}},Z=(e,t)=>{if(q.isCollapsed(t))return t.anchor;var[,r]=q.edges(t),n=S.pointRef(e,r);return ne.delete(e,{at:t}),n.unref()},Q=(e,t)=>{var[r]=S.node(e,t);return e=>e===r};function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ne=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{transform(e,t){e.children=Object(c.a)(e.children);var r=e.selection&&Object(c.a)(e.selection);switch(t.type){case"insert_node":var{path:n,node:o}=t,a=_.parent(e,n),i=n[n.length-1];if(a.children.splice(i,0,o),r)for(var[s,l]of q.points(r))r[l]=L.transform(s,t);break;case"insert_text":var{path:u,offset:d,text:f}=t,p=_.leaf(e,u),h=p.text.slice(0,d),v=p.text.slice(d);if(p.text=h+f+v,r)for(var[g,m]of q.points(r))r[m]=L.transform(g,t);break;case"merge_node":var{path:y}=t,b=_.get(e,y),w=T.previous(y),O=_.get(e,w),x=_.parent(e,y),E=y[y.length-1];if(J.isText(b)&&J.isText(O))O.text+=b.text;else{if(J.isText(b)||J.isText(O))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(y,"] to nodes of different interaces: ").concat(b," ").concat(O));O.children.push(...b.children)}if(x.children.splice(E,1),r)for(var[j,k]of q.points(r))r[k]=L.transform(j,t);break;case"move_node":var{path:P,newPath:F}=t;if(T.isAncestor(P,F))throw new Error("Cannot move a path [".concat(P,"] to new path [").concat(F,"] because the destination is inside itself."));var C=_.get(e,P),S=_.parent(e,P),A=P[P.length-1];S.children.splice(A,1);var D=T.transform(P,t),B=_.get(e,T.parent(D)),N=D[D.length-1];if(B.children.splice(N,0,C),r)for(var[M,R]of q.points(r))r[R]=L.transform(M,t);break;case"remove_node":var{path:I}=t,z=I[I.length-1];if(_.parent(e,I).children.splice(z,1),r)for(var[W,V]of q.points(r)){var H=L.transform(W,t);if(null!=r&&null!=H)r[V]=H;else{var K=void 0,U=void 0;for(var[Y,X]of _.texts(e)){if(-1!==T.compare(X,I)){U=[Y,X];break}K=[Y,X]}K?(W.path=K[1],W.offset=K[0].text.length):U?(W.path=U[1],W.offset=0):r=null}}break;case"remove_text":var{path:G,offset:Z,text:Q}=t,ee=_.leaf(e,G),te=ee.text.slice(0,Z),re=ee.text.slice(Z+Q.length);if(ee.text=te+re,r)for(var[ne,oe]of q.points(r))r[oe]=L.transform(ne,t);break;case"set_node":var{path:ae,newProperties:ie}=t;if(0===ae.length)throw new Error("Cannot set properties on the root node!");var se=_.get(e,ae);for(var le in ie){if("children"===le||"text"===le)throw new Error('Cannot set the "'.concat(le,'" property of nodes!'));var ce=ie[le];null==ce?delete se[le]:se[le]=ce}break;case"set_selection":var{newProperties:ue}=t;if(null==ue)r=ue;else if(null==r){if(!q.isRange(ue))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ue)," when there is no current selection."));r=ue}else Object.assign(r,ue);break;case"split_node":var{path:de,position:fe,properties:pe}=t;if(0===de.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(de,"] because the root node cannot be split."));var he,ve=_.get(e,de),ge=_.parent(e,de),me=de[de.length-1];if(J.isText(ve)){var ye=ve.text.slice(0,fe),be=ve.text.slice(fe);ve.text=ye,he=$({},ve,{},pe,{text:be})}else{var we=ve.children.slice(0,fe),Oe=ve.children.slice(fe);ve.children=we,he=$({},ve,{},pe,{children:Oe})}if(ge.children.splice(me+1,0,he),r)for(var[xe,Ee]of q.points(r))r[Ee]=L.transform(xe,t)}e.children=Object(c.b)(e.children),e.selection=r?Object(c.c)(r)?Object(c.b)(r):r:null}},{},G,{},{collapse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n)if("anchor"===r)ne.select(e,n.anchor);else if("focus"===r)ne.select(e,n.focus);else if("start"===r){var[o]=q.edges(n);ne.select(e,o)}else if("end"===r){var[,a]=q.edges(n);ne.select(e,a)}},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:o="character",reverse:a=!1}=t,{edge:i=null}=t;if(r){"start"===i&&(i=q.isBackward(r)?"focus":"anchor"),"end"===i&&(i=q.isBackward(r)?"anchor":"focus");var{anchor:s,focus:l}=r,c={distance:n,unit:o},u={};if(null==i||"anchor"===i){var d=a?S.before(e,s,c):S.after(e,s,c);d&&(u.anchor=d)}if(null==i||"focus"===i){var f=a?S.before(e,l,c):S.after(e,l,c);f&&(u.focus=f)}ne.setSelection(e,u)}},select(e,t){var{selection:r}=e;if(t=S.range(e,t),r)ne.setSelection(e,t);else{if(!q.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint(e,t,r){var{selection:n}=e,{edge:o="both"}=r;if(n){"start"===o&&(o=q.isBackward(n)?"focus":"anchor"),"end"===o&&(o=q.isBackward(n)?"anchor":"focus");var{anchor:a,focus:i}=n,s="anchor"===o?a:i;ne.setSelection(e,{["anchor"===o?"anchor":"focus"]:te({},s,{},t)})}},setSelection(e,t){var{selection:r}=e,n={},o={};if(r){for(var a in t)("anchor"===a&&null!=t.anchor&&!L.equals(t.anchor,r.anchor)||"focus"===a&&null!=t.focus&&!L.equals(t.focus,r.focus)||"anchor"!==a&&"focus"!==a&&t[a]!==r[a])&&(n[a]=r[a],o[a]=t[a]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:o})}}},{},{delete(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S.withoutNormalizing(e,()=>{var{reverse:r=!1,unit:n="character",distance:o=1,voids:a=!1}=t,{at:i=e.selection,hanging:s=!1}=t;if(i){if(q.isRange(i)&&q.isCollapsed(i)&&(i=i.anchor),L.isPoint(i)){var l=S.void(e,{at:i,mode:"highest"});if(!a&&l){var[,c]=l;i=c}else{var u={unit:n,distance:o};i={anchor:i,focus:r?S.before(e,i,u)||S.start(e,[]):S.after(e,i,u)||S.end(e,[])},s=!0}}if(T.isPath(i))ne.removeNodes(e,{at:i,voids:a});else if(!q.isCollapsed(i)){s||(i=S.unhangRange(e,i,{voids:a}));var[d,f]=q.edges(i),p=S.above(e,{match:t=>S.isBlock(e,t),at:d,voids:a}),h=S.above(e,{match:t=>S.isBlock(e,t),at:f,voids:a}),v=p&&h&&!T.equals(p[1],h[1]),g=T.equals(d.path,f.path),m=a?null:S.void(e,{at:d,mode:"highest"}),y=a?null:S.void(e,{at:f,mode:"highest"});if(m){var b=S.before(e,d);b&&p&&T.isAncestor(p[1],b.path)&&(d=b)}if(y){var w=S.after(e,f);w&&h&&T.isAncestor(h[1],w.path)&&(f=w)}var O,x=[];for(var E of S.nodes(e,{at:i,voids:a})){var[j,k]=E;O&&0===T.compare(k,O)||(!a&&S.isVoid(e,j)||!T.isCommon(k,d.path)&&!T.isCommon(k,f.path))&&(x.push(E),O=k)}var P=Array.from(x,t=>{var[,r]=t;return S.pathRef(e,r)}),F=S.pointRef(e,d),C=S.pointRef(e,f);if(!g&&!m){var A=F.current,[D]=S.leaf(e,A),{path:_}=A,{offset:B}=d,N=D.text.slice(B);e.apply({type:"remove_text",path:_,offset:B,text:N})}for(var M of P){var R=M.unref();ne.removeNodes(e,{at:R,voids:a})}if(!y){var I=C.current,[z]=S.leaf(e,I),{path:W}=I,V=g?d.offset:0,H=z.text.slice(V,f.offset);e.apply({type:"remove_text",path:W,offset:V,text:H})}!g&&v&&C.current&&F.current&&ne.mergeNodes(e,{at:C.current,hanging:!0,voids:a});var K=C.unref()||F.unref();null==t.at&&K&&ne.select(e,K)}}})},insertFragment(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:o=!1}=r,{at:a=e.selection}=r;if(t.length&&a){if(q.isRange(a))if(n||(a=S.unhangRange(e,a)),q.isCollapsed(a))a=a.anchor;else{var[,i]=q.edges(a);if(!o&&S.void(e,{at:i}))return;var s=S.pointRef(e,i);ne.delete(e,{at:a}),a=s.unref()}else T.isPath(a)&&(a=S.start(e,a));if(o||!S.void(e,{at:a})){var l=S.above(e,{at:a,match:t=>S.isInline(e,t),mode:"highest",voids:o});if(l){var[,c]=l;if(S.isEnd(e,a,c))a=S.after(e,c);else if(S.isStart(e,a,c)){a=S.before(e,c)}}var u=S.above(e,{match:t=>S.isBlock(e,t),at:a,voids:o}),[,d]=u,f=S.isStart(e,a,d),p=S.isEnd(e,a,d),h=!f||f&&p,v=!p,[,g]=_.first({children:t},[]),[,m]=_.last({children:t},[]),y=[],b=t=>{var[r,n]=t;return!(h&&T.isAncestor(n,g)&&A.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(v&&T.isAncestor(n,m)&&A.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))};for(var w of _.nodes({children:t},{pass:b}))w[1].length>0&&b(w)&&y.push(w);var O=[],x=[],E=[],j=!0,k=!1;for(var[P]of y)A.isElement(P)&&!e.isInline(P)?(j=!1,k=!0,x.push(P)):j?O.push(P):E.push(P);var[F]=S.nodes(e,{at:a,match:t=>J.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),[,C]=F,D=S.isStart(e,a,C),B=S.isEnd(e,a,C),N=S.pathRef(e,p?T.next(d):d),M=S.pathRef(e,B?T.next(C):C);ne.splitNodes(e,{at:a,match:t=>k?S.isBlock(e,t):J.isText(t)||S.isInline(e,t),mode:k?"lowest":"highest",voids:o});var R=S.pathRef(e,!D||D&&B?T.next(C):C);if(ne.insertNodes(e,O,{at:R.current,match:t=>J.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),ne.insertNodes(e,x,{at:N.current,match:t=>S.isBlock(e,t),mode:"lowest",voids:o}),ne.insertNodes(e,E,{at:M.current,match:t=>J.isText(t)||S.isInline(e,t),mode:"highest",voids:o}),!r.at){var I;I=E.length>0?T.previous(M.current):x.length>0?T.previous(N.current):T.previous(R.current);var L=S.end(e,I);ne.select(e,L)}R.unref(),N.unref(),M.unref()}}})},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S.withoutNormalizing(e,()=>{var{voids:n=!1}=r,{at:o=e.selection}=r;if(o){if(T.isPath(o)&&(o=S.range(e,o)),q.isRange(o))if(q.isCollapsed(o))o=o.anchor;else{var a=q.end(o);if(!n&&S.void(e,{at:a}))return;var i=S.pointRef(e,a);ne.delete(e,{at:o,voids:n}),o=i.unref(),ne.setSelection(e,{anchor:o,focus:o})}if(n||!S.void(e,{at:o})){var{path:s,offset:l}=o;e.apply({type:"insert_text",path:s,offset:l,text:t})}}})}});function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach(function(t){u(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ie=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var{path:t}=e;return T.levels(t);case"insert_node":var{node:r,path:n}=e;return[...T.levels(n),...J.isText(r)?[]:Array.from(_.nodes(r),e=>{var[,t]=e;return n.concat(t)})];case"merge_node":var{path:o}=e;return[...T.ancestors(o),T.previous(o)];case"move_node":var{path:a,newPath:i}=e;if(T.equals(a,i))return[];var s=[],l=[];for(var c of T.ancestors(a)){var u=T.transform(c,e);s.push(u)}for(var d of T.ancestors(i)){var f=T.transform(d,e);l.push(f)}return[...s,...l];case"remove_node":var{path:p}=e;return[...T.ancestors(p)];case"split_node":var{path:h}=e;return[...T.levels(h),T.next(h)];default:return[]}};
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function se(e){return!0==(null!=(t=e)&&"object"==typeof t&&!1===Array.isArray(t))&&"[object Object]"===Object.prototype.toString.call(e);
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
var t}var le=function(e){var t,r;return!1!==se(e)&&("function"==typeof(t=e.constructor)&&(!1!==se(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf")))},ce={isHistory:e=>le(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||M.isOperationList(e.redos[0]))&&(0===e.undos.length||M.isOperationList(e.undos[0]))},ue=(new WeakMap,new WeakMap),de=new WeakMap,fe={isHistoryEditor:e=>S.isEditor(e)&&ce.isHistory(e.history),isMerging:e=>de.get(e),isSaving:e=>ue.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=fe.isMerging(e);de.set(e,!1),t(),de.set(e,r)},withoutSaving(e,t){var r=fe.isSaving(e);ue.set(e,!1),t(),ue.set(e,r)}},pe=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!T.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!T.equals(e.path,t.path))),he=(e,t)=>"set_selection"!==e.type||null!=e.newProperties,ve=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),ge=e=>"set_selection"!==e.type,me=r("./node_modules/lodash/throttle.js"),ye=r.n(me);function be(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function we(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function Oe(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return we(r.overflowY,t)||we(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function xe(e,t,r,n,o,a,i,s){return a<e&&i>t||a>e&&i<t?0:a<=e&&s<=r||i>=t&&s>=r?a-e-n:i>t&&s<r||a<e&&s>r?i-t+o:0}var Ee=function(e,t){var r=window,n=t.scrollMode,o=t.block,a=t.inline,i=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof i?i:function(e){return e!==i};if(!be(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],d=e;be(d)&&l(d);){if((d=d.parentElement)===c){u.push(d);break}null!=d&&d===document.body&&Oe(d)&&!Oe(document.documentElement)||null!=d&&Oe(d,s)&&u.push(d)}for(var f=r.visualViewport?r.visualViewport.width:innerWidth,p=r.visualViewport?r.visualViewport.height:innerHeight,h=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),m=g.height,y=g.width,b=g.top,w=g.right,O=g.bottom,x=g.left,E="start"===o||"nearest"===o?b:"end"===o?O:b+m/2,j="center"===a?x+y/2:"end"===a?w:x,k=[],P=0;P<u.length;P++){var F=u[P],C=F.getBoundingClientRect(),S=C.height,A=C.width,D=C.top,_=C.right,B=C.bottom,N=C.left;if("if-needed"===n&&b>=0&&x>=0&&O<=p&&w<=f&&b>=D&&O<=B&&x>=N&&w<=_)return k;var M=getComputedStyle(F),T=parseInt(M.borderLeftWidth,10),R=parseInt(M.borderTopWidth,10),I=parseInt(M.borderRightWidth,10),L=parseInt(M.borderBottomWidth,10),z=0,W=0,q="offsetWidth"in F?F.offsetWidth-F.clientWidth-T-I:0,V="offsetHeight"in F?F.offsetHeight-F.clientHeight-R-L:0;if(c===F)z="start"===o?E:"end"===o?E-p:"nearest"===o?xe(v,v+p,p,R,L,v+E,v+E+m,m):E-p/2,W="start"===a?j:"center"===a?j-f/2:"end"===a?j-f:xe(h,h+f,f,T,I,h+j,h+j+y,y),z=Math.max(0,z+v),W=Math.max(0,W+h);else{z="start"===o?E-D-R:"end"===o?E-B+L+V:"nearest"===o?xe(D,B,S,R,L+V,E,E+m,m):E-(D+S/2)+V/2,W="start"===a?j-N-T:"center"===a?j-(N+A/2)+q/2:"end"===a?j-_+I+q:xe(N,_,A,T,I+q,j,j+y,y);var H=F.scrollLeft,K=F.scrollTop;E+=K-(z=Math.max(0,Math.min(K+z,F.scrollHeight-S+V))),j+=H-(W=Math.max(0,Math.min(H+W,F.scrollWidth-A+q)))}k.push({el:F,top:z,left:W})}return k};function je(e){return e===Object(e)&&0!==Object.keys(e).length}var ke=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(je(t)&&"function"==typeof t.behavior)return t.behavior(r?[]:Ee(e,t));if(!r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:je(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach(function(e){var n=e.el,o=e.top,a=e.left;n.scroll&&r?n.scroll({top:o,left:a,behavior:t}):(n.scrollTop=o,n.scrollLeft=a)})}(Ee(e,n),n.behavior)}},Pe=r("./node_modules/direction/index.js"),Fe=r.n(Pe),Ce=r("react-dom"),Se=r.n(Ce),Ae=r("./node_modules/is-hotkey/lib/index.js");function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _e(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Be=0;class Ne{constructor(){this.id="".concat(Be++)}}var Me=new WeakMap,Te=new WeakMap,Re=new WeakMap,Ie=new WeakMap,Le=new WeakMap,ze=new WeakMap,We=new WeakMap,qe=new WeakMap,Ve=new WeakMap,He=new WeakMap,Ke=Symbol("placeholder"),Je=e=>$e(e)&&8===e.nodeType,Ue=e=>$e(e)&&1===e.nodeType,$e=e=>e instanceof Node,Ye=e=>$e(e)&&3===e.nodeType,Xe=(e,t,r)=>{for(var{childNodes:n}=e,o=n[t],a=t,i=!1,s=!1;(Je(o)||Ue(o)&&0===o.childNodes.length||Ue(o)&&"false"===o.getAttribute("contenteditable"))&&(!i||!s);)a>=n.length?(i=!0,a=t-1,r="backward"):a<0?(s=!0,a=t+1,r="forward"):(o=n[a],a+="forward"===r?1:-1);return o},Ge=e=>{var t="";if(Ye(e)&&e.nodeValue)return e.nodeValue;if(Ue(e)){for(var r of Array.from(e.childNodes))t+=Ge(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},Ze={findKey(e,t){var r=We.get(t);return r||(r=new Ne,We.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var o=Te.get(n);if(null==o){if(S.isEditor(n))return r;break}var a=Me.get(n);if(null==a)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},isFocused:e=>!!Ve.get(e),isReadOnly:e=>!!qe.get(e),blur(e){var t=Ze.toDOMNode(e,e);Ve.set(e,!1),window.document.activeElement===t&&t.blur()},focus(e){var t=Ze.toDOMNode(e,e);Ve.set(e,!0),window.document.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){var{selection:t}=e,r=window.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&ne.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:o=!1}=n,a=Ze.toDOMNode(e,e);try{r=Ue(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===a&&(!o||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var r=S.isEditor(t)?Re.get(e):Le.get(Ze.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return r},toDOMPoint(e,t){var r,[n]=S.node(e,t.path),o=Ze.toDOMNode(e,n);S.void(e,{at:t})&&(t={path:t.path,offset:0});var a=Array.from(o.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0;for(var s of a){var l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:c}=l.textContent,u=s.getAttribute("data-slate-length"),d=i+(null==u?c:parseInt(u,10));if(t.offset<=d){r=[l,Math.min(c,Math.max(0,t.offset-i))];break}i=d}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,o=q.isBackward(t),a=Ze.toDOMPoint(e,r),i=q.isCollapsed(t)?a:Ze.toDOMPoint(e,n),s=window.document.createRange(),[l,c]=o?i:a,[u,d]=o?a:i,f=!!(Ue(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),p=!!(Ue(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,f?1:c),s.setEnd(u,p?1:d),s},toSlateNode(e,t){var r=Ue(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?Ie.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:o}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var a,i=Ze.toSlateNode(e,t.target),s=Ze.findPath(e,i);if(S.isVoid(e,i)){var l=o.getBoundingClientRect(),c=e.isInline(i)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,u=S.point(e,s,{edge:c?"start":"end"}),d=c?S.before(e,u):S.after(e,u);if(d)return S.range(e,d)}var{document:f}=window;if(f.caretRangeFromPoint)a=f.caretRangeFromPoint(r,n);else{var p=f.caretPositionFromPoint(r,n);p&&((a=f.createRange()).setStart(p.offsetNode,p.offset),a.setEnd(p.offsetNode,p.offset))}if(!a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Ze.toSlateRange(e,a)},toSlatePoint(e,t){var[r,n]=(e=>{var[t,r]=e;if(Ue(t)&&t.childNodes.length){var n=r===t.childNodes.length,o=n?"backward":"forward";for(t=Xe(t,n?r-1:r,o);Ue(t)&&t.childNodes.length;){var a=n?t.childNodes.length-1:0;t=Xe(t,a,o)}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),o=r.parentNode,a=null,i=0;if(o){var s=o.closest('[data-slate-void="true"]'),l=o.closest("[data-slate-leaf]"),c=null;if(l){a=l.closest('[data-slate-node="text"]');var u=window.document.createRange();u.setStart(a,0),u.setEnd(r,n);var d=u.cloneContents();[...d.querySelectorAll("[data-slate-zero-width]"),...d.querySelectorAll("[contenteditable=false]")].forEach(e=>{e.parentNode.removeChild(e)}),i=d.textContent.length,c=a}else s&&(a=(l=s.querySelector("[data-slate-leaf]")).closest('[data-slate-node="text"]'),i=(c=l).textContent.length);c&&i===c.textContent.length&&o.hasAttribute("data-slate-zero-width")&&i--}if(!a)throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t));var f=Ze.toSlateNode(e,a);return{path:Ze.findPath(e,f),offset:i}},toSlateRange(e,t){var r,n,o,a,i;if((t instanceof Selection?t.anchorNode:t.startContainer)&&(t instanceof Selection?(r=t.anchorNode,n=t.anchorOffset,o=t.focusNode,a=t.focusOffset,i=t.isCollapsed):(r=t.startContainer,n=t.startOffset,o=t.endContainer,a=t.endOffset,i=t.collapsed)),null==r||null==o||null==n||null==a)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var s=Ze.toSlatePoint(e,[r,n]);return{anchor:s,focus:i?s:Ze.toSlatePoint(e,[o,a])}}},Qe=Object(n.createContext)(!1),et=Object(n.createContext)(null),tt=()=>{var e=Object(n.useContext)(et);if(!e)throw new Error("The `useEditor` hook must be used inside the <Slate> component's context.");return e},rt=Object(n.createContext)(null),nt=()=>{var e=Object(n.useContext)(rt);if(!e)throw new Error("The `useSlate` hook must be used inside the <SlateProvider> component's context.");var[t]=e;return t},ot=e=>{var{editor:t,children:r,onChange:a,value:i}=e,s=_e(e,["editor","children","onChange","value"]),[l,c]=Object(n.useState)(0),u=Object(n.useMemo)(()=>(t.children=i,Object.assign(t,s),[t]),[l,i,...Object.values(s)]),d=Object(n.useCallback)(()=>{a(t.children),c(l+1)},[l,a]);return He.set(t,d),Object(n.useEffect)(()=>()=>{He.set(t,()=>{})},[]),o.a.createElement(rt.Provider,{value:u},o.a.createElement(et.Provider,{value:t},o.a.createElement(Qe.Provider,{value:Ze.isFocused(t)},r)))},at=Object(n.createContext)(!1),it=Object(n.createContext)(!1),st=e=>{var{isLast:t,leaf:r,parent:n,text:a}=e,i=tt(),s=Ze.findPath(i,a),l=T.parent(s);return i.isVoid(n)?o.a.createElement(ct,{length:_.string(n).length}):""!==r.text||n.children[n.children.length-1]!==a||i.isInline(n)||""!==S.string(i,l)?""===r.text?o.a.createElement(ct,null):t&&"\n"===r.text.slice(-1)?o.a.createElement(lt,{isTrailing:!0,text:r.text}):o.a.createElement(lt,{text:r.text}):o.a.createElement(ct,{isLineBreak:!0})},lt=e=>{var{text:t,isTrailing:r=!1}=e;return o.a.createElement("span",{"data-slate-string":!0},t,r?"\n":null)},ct=e=>{var{length:t=0,isLineBreak:r=!1}=e;return o.a.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?o.a.createElement("br",null):null)},ut=o.a.memo(e=>{var{leaf:t,isLast:r,text:n,parent:a,renderLeaf:i=(e=>o.a.createElement(dt,Object.assign({},e)))}=e,s=o.a.createElement(st,{isLast:r,leaf:t,parent:a,text:n});t[Ke]&&(s=o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{contentEditable:!1,style:{pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333",userSelect:"none",fontStyle:"normal",fontWeight:"normal",textDecoration:"none"}},t.placeholder),s));return i({attributes:{"data-slate-leaf":!0},children:s,leaf:t,text:n})},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&J.matches(t.leaf,e.leaf)),dt=e=>{var{attributes:t,children:r}=e;return o.a.createElement("span",Object.assign({},t),r)},ft="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,pt=o.a.memo(e=>{for(var{decorations:t,isLast:r,parent:a,renderLeaf:i,text:s}=e,l=tt(),c=Object(n.useRef)(null),u=J.decorations(s,t),d=Ze.findKey(l,s),f=[],p=0;p<u.length;p++){var h=u[p];f.push(o.a.createElement(ut,{isLast:r&&p===u.length-1,key:"".concat(d.id,"-").concat(p),leaf:h,text:s,parent:a,renderLeaf:i}))}return ft(()=>{c.current?(Le.set(d,c.current),ze.set(s,c.current),Ie.set(c.current,s)):(Le.delete(d),ze.delete(s))}),o.a.createElement("span",{"data-slate-node":"text",ref:c},f)},(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text),ht=o.a.memo(e=>{var{decorate:t,decorations:r,element:a,renderElement:i=(e=>o.a.createElement(vt,Object.assign({},e))),renderLeaf:s,selection:l}=e,c=Object(n.useRef)(null),u=tt(),d=(()=>Object(n.useContext)(at))(),f=u.isInline(a),p=Ze.findKey(u,a),h=o.a.createElement(mt,{decorate:t,decorations:r,node:a,renderElement:i,renderLeaf:s,selection:l}),v={"data-slate-node":"element",ref:c};if(f&&(v["data-slate-inline"]=!0),!f&&S.hasInlines(u,a)){var g=_.string(a),m=Fe()(g);"rtl"===m&&(v.dir=m)}if(S.isVoid(u,a)){v["data-slate-void"]=!0,!d&&f&&(v.contentEditable=!1);var y=f?"span":"div",[[b]]=_.texts(a);h=d?null:o.a.createElement(y,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},o.a.createElement(pt,{decorations:[],isLast:!1,parent:a,text:b})),Me.set(b,0),Te.set(b,a)}return ft(()=>{c.current?(Le.set(p,c.current),ze.set(a,c.current),Ie.set(c.current,a)):(Le.delete(p),ze.delete(a))}),o.a.createElement(it.Provider,{value:!!l},i({attributes:v,children:h,element:a}))},(e,t)=>e.decorate===t.decorate&&e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&gt(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&q.equals(e.selection,t.selection))),vt=e=>{var{attributes:t,children:r,element:n}=e,a=tt().isInline(n)?"span":"div";return o.a.createElement(a,Object.assign({},t,{style:{position:"relative"}}),r)},gt=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(!q.equals(n,o))return!1}return!0},mt=e=>{for(var{decorate:t,decorations:r,node:n,renderElement:a,renderLeaf:i,selection:s}=e,l=tt(),c=Ze.findPath(l,n),u=[],d=A.isElement(n)&&!l.isInline(n)&&S.hasInlines(l,n),f=0;f<n.children.length;f++){var p=c.concat(f),h=n.children[f],v=Ze.findKey(l,h),g=S.range(l,p),m=s&&q.intersection(g,s),y=t([h,p]);for(var b of r){var w=q.intersection(b,g);w&&y.push(w)}A.isElement(h)?u.push(o.a.createElement(ht,{decorate:t,decorations:y,element:h,key:v.id,renderElement:a,renderLeaf:i,selection:m})):u.push(o.a.createElement(pt,{decorations:y,key:v.id,isLast:d&&f===n.children.length-1,parent:n,renderLeaf:i,text:h})),Me.set(h,f),Te.set(h,n)}return o.a.createElement(o.a.Fragment,null,u)},yt=("undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream,"undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent)),bt="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),wt="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Ot="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),xt="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),Et={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},jt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},kt={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Pt=e=>{var t=Et[e],r=jt[e],n=kt[e],o=t&&Object(Ae.isKeyHotkey)(t),a=r&&Object(Ae.isKeyHotkey)(r),i=n&&Object(Ae.isKeyHotkey)(n);return e=>!(!o||!o(e))||(!!(yt&&a&&a(e))||!(yt||!i||!i(e)))},Ft={isBold:Pt("bold"),isCompose:Pt("compose"),isMoveBackward:Pt("moveBackward"),isMoveForward:Pt("moveForward"),isDeleteBackward:Pt("deleteBackward"),isDeleteForward:Pt("deleteForward"),isDeleteLineBackward:Pt("deleteLineBackward"),isDeleteLineForward:Pt("deleteLineForward"),isDeleteWordBackward:Pt("deleteWordBackward"),isDeleteWordForward:Pt("deleteWordForward"),isExtendBackward:Pt("extendBackward"),isExtendForward:Pt("extendForward"),isExtendLineBackward:Pt("extendLineBackward"),isExtendLineForward:Pt("extendLineForward"),isItalic:Pt("italic"),isMoveLineBackward:Pt("moveLineBackward"),isMoveLineForward:Pt("moveLineForward"),isMoveWordBackward:Pt("moveWordBackward"),isMoveWordForward:Pt("moveWordForward"),isRedo:Pt("redo"),isSplitBlock:Pt("splitBlock"),isTransposeCharacter:Pt("transposeCharacter"),isUndo:Pt("undo")};function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach(function(t){De(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var At=!(bt||Ot||xt),Dt=e=>{var{autoFocus:t,decorate:r=_t,onDOMBeforeInput:a,placeholder:i,readOnly:s=!1,renderElement:l,renderLeaf:c,style:u={},as:d="div"}=e,f=_e(e,["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","style","as"]),p=nt(),h=Object(n.useRef)(null);qe.set(p,s);var v=Object(n.useMemo)(()=>({isComposing:!1,isUpdatingSelection:!1,latestElement:null}),[]);ft(()=>{h.current?(Re.set(p,h.current),ze.set(p,h.current),Ie.set(h.current,p)):ze.delete(p)}),ft(()=>{var{selection:e}=p,t=window.getSelection();if(!v.isComposing&&t&&Ze.isFocused(p)){var r="None"!==t.type;if(e||r){var n=Re.get(p),o=!1;if(n.contains(t.anchorNode)&&n.contains(t.focusNode)&&(o=!0),!(r&&o&&e&&q.equals(Ze.toSlateRange(p,t),e))){var a=Ze.toDOMNode(p,p);v.isUpdatingSelection=!0;var i=e&&Ze.toDOMRange(p,e);if(i){q.isBackward(e)?t.setBaseAndExtent(i.endContainer,i.endOffset,i.startContainer,i.startOffset):t.setBaseAndExtent(i.startContainer,i.startOffset,i.endContainer,i.endOffset);var s=i.startContainer.parentElement;ke(s,{scrollMode:"if-needed",boundary:a})}else t.removeAllRanges();setTimeout(()=>{i&&bt&&a.focus(),v.isUpdatingSelection=!1})}}}}),Object(n.useEffect)(()=>{h.current&&t&&h.current.focus()},[t]);var g=Object(n.useCallback)(e=>{if(!s&&Nt(p,e.target)&&!Rt(e,a)){var{selection:t}=p,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;if(e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[o]=e.getTargetRanges();if(o){var i=Ze.toSlateRange(p,o);t&&q.equals(t,i)||ne.select(p,i)}}if(t&&q.isExpanded(t)&&r.startsWith("delete"))return void S.deleteFragment(p);switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":S.deleteFragment(p);break;case"deleteContent":case"deleteContentForward":S.deleteForward(p);break;case"deleteContentBackward":S.deleteBackward(p);break;case"deleteEntireSoftLine":S.deleteBackward(p,{unit:"line"}),S.deleteForward(p,{unit:"line"});break;case"deleteHardLineBackward":S.deleteBackward(p,{unit:"block"});break;case"deleteSoftLineBackward":S.deleteBackward(p,{unit:"line"});break;case"deleteHardLineForward":S.deleteForward(p,{unit:"block"});break;case"deleteSoftLineForward":S.deleteForward(p,{unit:"line"});break;case"deleteWordBackward":S.deleteBackward(p,{unit:"word"});break;case"deleteWordForward":S.deleteForward(p,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":S.insertBreak(p);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":n instanceof DataTransfer?Ze.insertData(p,n):"string"==typeof n&&S.insertText(p,n)}}},[s,a]);ft(()=>(h.current&&At&&h.current.addEventListener("beforeinput",g),()=>{h.current&&At&&h.current.removeEventListener("beforeinput",g)}),[g]);var m=Object(n.useCallback)(ye()(()=>{if(!s&&!v.isComposing&&!v.isUpdatingSelection){var{activeElement:e}=window.document,t=Ze.toDOMNode(p,p),r=window.getSelection();if(e===t?(v.latestElement=e,Ve.set(p,!0)):Ve.delete(p),!r)return ne.deselect(p);var{anchorNode:n,focusNode:o}=r,a=Nt(p,n)||Mt(p,n),i=Nt(p,o)||Mt(p,o);if(a&&i){var l=Ze.toSlateRange(p,r);ne.select(p,l)}else ne.deselect(p)}},100),[s]);ft(()=>(window.document.addEventListener("selectionchange",m),()=>{window.document.removeEventListener("selectionchange",m)}),[m]);var y=r([p,[]]);if(i&&1===p.children.length&&1===Array.from(_.texts(p)).length&&""===_.string(p)){var b=S.start(p,[]);y.push({[Ke]:!0,placeholder:i,anchor:b,focus:b})}return o.a.createElement(at.Provider,{value:s},o.a.createElement(d,Object.assign({"data-gramm":!1,role:s?void 0:"textbox"},f,{spellCheck:At?f.spellCheck:void 0,autoCorrect:At?f.autoCorrect:void 0,autoCapitalize:At?f.autoCapitalize:void 0,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s||void 0,suppressContentEditableWarning:!0,ref:h,style:St({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},u),onBeforeInput:Object(n.useCallback)(e=>{if(!At&&!s&&!Tt(e,f.onBeforeInput)&&Nt(p,e.target)){e.preventDefault();var t=e.data;S.insertText(p,t)}},[s]),onBlur:Object(n.useCallback)(e=>{if(!s&&!v.isUpdatingSelection&&Nt(p,e.target)&&!Tt(e,f.onBlur)&&v.latestElement!==window.document.activeElement){var{relatedTarget:t}=e;if(!(t===Ze.toDOMNode(p,p)||Ue(t)&&t.hasAttribute("data-slate-spacer"))){if(null!=t&&$e(t)&&Ze.hasDOMNode(p,t)){var r=Ze.toSlateNode(p,t);if(A.isElement(r)&&!p.isVoid(r))return}Ve.delete(p)}}},[s,f.onBlur]),onClick:Object(n.useCallback)(e=>{if(!s&&Bt(p,e.target)&&!Tt(e,f.onClick)&&$e(e.target)){var t=Ze.toSlateNode(p,e.target),r=Ze.findPath(p,t),n=S.start(p,r),o=S.end(p,r),a=S.void(p,{at:n}),i=S.void(p,{at:o});if(a&&i&&T.equals(a[1],i[1])){var l=S.range(p,n);ne.select(p,l)}}},[s,f.onClick]),onCompositionEnd:Object(n.useCallback)(e=>{Nt(p,e.target)&&!Tt(e,f.onCompositionEnd)&&(v.isComposing=!1,wt||bt||!e.data||S.insertText(p,e.data))},[f.onCompositionEnd]),onCompositionStart:Object(n.useCallback)(e=>{Nt(p,e.target)&&!Tt(e,f.onCompositionStart)&&(v.isComposing=!0)},[f.onCompositionStart]),onCopy:Object(n.useCallback)(e=>{Nt(p,e.target)&&!Tt(e,f.onCopy)&&(e.preventDefault(),Ze.setFragmentData(p,e.clipboardData))},[f.onCopy]),onCut:Object(n.useCallback)(e=>{if(!s&&Nt(p,e.target)&&!Tt(e,f.onCut)){e.preventDefault(),Ze.setFragmentData(p,e.clipboardData);var{selection:t}=p;t&&q.isExpanded(t)&&S.deleteFragment(p)}},[s,f.onCut]),onDragOver:Object(n.useCallback)(e=>{if(Bt(p,e.target)&&!Tt(e,f.onDragOver)){var t=Ze.toSlateNode(p,e.target);S.isVoid(p,t)&&e.preventDefault()}},[f.onDragOver]),onDragStart:Object(n.useCallback)(e=>{if(Bt(p,e.target)&&!Tt(e,f.onDragStart)){var t=Ze.toSlateNode(p,e.target),r=Ze.findPath(p,t);if(S.void(p,{at:r})){var n=S.range(p,r);ne.select(p,n)}Ze.setFragmentData(p,e.dataTransfer)}},[f.onDragStart]),onDrop:Object(n.useCallback)(e=>{if(Bt(p,e.target)&&!s&&!Tt(e,f.onDrop)&&(!At||!wt&&e.dataTransfer.files.length>0)){e.preventDefault();var t=Ze.findEventRange(p,e),r=e.dataTransfer;ne.select(p,t),Ze.insertData(p,r)}},[s,f.onDrop]),onFocus:Object(n.useCallback)(e=>{if(!s&&!v.isUpdatingSelection&&Nt(p,e.target)&&!Tt(e,f.onFocus)){var t=Ze.toDOMNode(p,p);if(v.latestElement=window.document.activeElement,bt&&e.target!==t)return void t.focus();Ve.set(p,!0)}},[s,f.onFocus]),onKeyDown:Object(n.useCallback)(e=>{if(!s&&Nt(p,e.target)&&!Tt(e,f.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=p;if(Ft.isRedo(t))return e.preventDefault(),void("function"==typeof p.redo&&p.redo());if(Ft.isUndo(t))return e.preventDefault(),void("function"==typeof p.undo&&p.undo());if(Ft.isMoveLineBackward(t))return e.preventDefault(),void ne.move(p,{unit:"line",reverse:!0});if(Ft.isMoveLineForward(t))return e.preventDefault(),void ne.move(p,{unit:"line"});if(Ft.isExtendLineBackward(t))return e.preventDefault(),void ne.move(p,{unit:"line",edge:"focus",reverse:!0});if(Ft.isExtendLineForward(t))return e.preventDefault(),void ne.move(p,{unit:"line",edge:"focus"});if(Ft.isMoveBackward(t))return e.preventDefault(),void(r&&q.isCollapsed(r)?ne.move(p,{reverse:!0}):ne.collapse(p,{edge:"start"}));if(Ft.isMoveForward(t))return e.preventDefault(),void(r&&q.isCollapsed(r)?ne.move(p):ne.collapse(p,{edge:"end"}));if(Ft.isMoveWordBackward(t))return e.preventDefault(),void ne.move(p,{unit:"word",reverse:!0});if(Ft.isMoveWordForward(t))return e.preventDefault(),void ne.move(p,{unit:"word"});if(!At){if(Ft.isBold(t)||Ft.isItalic(t)||Ft.isTransposeCharacter(t))return void e.preventDefault();if(Ft.isSplitBlock(t))return e.preventDefault(),void S.insertBreak(p);if(Ft.isDeleteBackward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteBackward(p));if(Ft.isDeleteForward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteForward(p));if(Ft.isDeleteLineBackward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteBackward(p,{unit:"line"}));if(Ft.isDeleteLineForward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteForward(p,{unit:"line"}));if(Ft.isDeleteWordBackward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteBackward(p,{unit:"word"}));if(Ft.isDeleteWordForward(t))return e.preventDefault(),void(r&&q.isExpanded(r)?S.deleteFragment(p):S.deleteForward(p,{unit:"word"}))}}},[s,f.onKeyDown]),onPaste:Object(n.useCallback)(e=>{!Nt(p,e.target)||Tt(e,f.onPaste)||At&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||s||(e.preventDefault(),Ze.insertData(p,e.clipboardData))},[s,f.onPaste])}),o.a.createElement(mt,{decorate:r,decorations:y,node:p,renderElement:l,renderLeaf:c,selection:p.selection})))},_t=()=>[],Bt=(e,t)=>$e(t)&&Ze.hasDOMNode(e,t),Nt=(e,t)=>$e(t)&&Ze.hasDOMNode(e,t,{editable:!0}),Mt=(e,t)=>{var r=Bt(e,t)&&Ze.toSlateNode(e,t);return S.isVoid(e,r)},Tt=(e,t)=>!!t&&(t(e),e.isDefaultPrevented()||e.isPropagationStopped()),Rt=(e,t)=>!!t&&(t(e),e.defaultPrevented),It=r("./node_modules/tslib/tslib.es6.js"),Lt=r("./node_modules/use-subscription/index.js"),zt=new WeakMap,Wt=Symbol(),qt=Promise.resolve();function Vt(){for(var e,t,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=[],i=function(e){if(!e)return"continue";var t=zt.get(e);if(!t){var r=Wt;e instanceof Promise||e.subscribe(function(e){r=e}).unsubscribe(),t=r!==Wt?{thenable:qt,isSync:!0,value:r}:{thenable:(e instanceof Promise?e:new Promise(function(t,r){e.subscribe(t,r)})).then(function(e){t&&(t.value=e)}),isSync:!1,value:Wt},zt.set(e,t)}t.value===Wt&&a.push(t.thenable)};try{for(var s=Object(It.d)(r),l=s.next();!l.done;l=s.next()){i(l.value)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}if(a.length>0)throw Promise.all(a);return Object(Lt.useSubscription)(n.useMemo(function(){return{getCurrentValue:function(){return r.map(function(e){var t;return e?null===(t=zt.get(e))||void 0===t?void 0:t.value:void 0})},subscribe:function(e){var t=[];return r.forEach(function(r,n){var o;if(r&&!(r instanceof Promise))if(null===(o=zt.get(r))||void 0===o?void 0:o.isSync){var a=!0;t.push(r.subscribe(function(t){a?a=!1:(zt.set(r,{thenable:qt,isSync:!0,value:t}),e())}))}else t.push(r.subscribe(function(t){zt.set(r,{thenable:qt,isSync:!1,value:t}),e()}))}),function(){t.forEach(function(e){return e.unsubscribe()})}}}},r))}var Ht,Kt,Jt,Ut,$t,Yt=r("./node_modules/rxjs/_esm5/internal/BehaviorSubject.js"),Xt=r("./node_modules/rxjs/_esm5/internal/scheduler/asap.js"),Gt=r("./node_modules/rxjs/_esm5/internal/operators/observeOn.js");class Zt{constructor(e,t){this.editor=e,this.apply=t,this.version=0,this._cursors=new Yt.a(new Map),this.cursors=this._cursors.pipe(Object(Gt.b)(Xt.a))}removeCursor(e){this._cursors.value.delete(e),this._cursors.next(this._cursors.value)}mergePatch(e,t){if(e.version<=this.version){let r=this.editor.operations.slice(e.version),n=e.ops,o=[],a=[];if(r.length&&n.length)for(let e=0;e<r.length;e++){let t=r[e];for(let e=0;e<n.length;e++){let r=n[e];const[o,i]=Qt(t,r);t=o,a.push(i)}o.push(t),n=a}else a=n,o=r;return S.withoutNormalizing(this.editor,()=>{a.forEach(e=>{e&&this.applyRemoteOp(e,t),this.version++})}),this.editor.onChange(),o}return!1}applyRemoteOp(e,t){var r,n,o;if("set_selection"===e.type){if(e.newProperties){let o=this._cursors.value.get(t);o||(o=S.rangeRef(this.editor,e.newProperties),this._cursors.value.set(t,o)),o.current&&(o.current={anchor:e.newProperties.anchor||(null===(r=o.current)||void 0===r?void 0:r.anchor),focus:e.newProperties.focus||(null===(n=o.current)||void 0===n?void 0:n.focus)})}else null===(o=this._cursors.value.get(t))||void 0===o||o.unref();this._cursors.next(this._cursors.value)}else this.apply(e)}ackMerge(e,t,r){S.withoutNormalizing(this.editor,()=>{t.forEach(e=>{e&&this.applyRemoteOp(e,r)})}),this.version=e,this.editor.onChange()}}function Qt(e,t){if(!e||!t)return[e,t];switch(e.type){case"remove_text":case"insert_text":switch(t.type){case"remove_text":case"insert_text":T.equals(t.path,e.path)&&(t.offset>e.offset?"insert_text"===e.type?t.offset+=e.text.length:t.offset-=e.text.length:"insert_text"===t.type?e.offset+=t.text.length:e.offset-=t.text.length);break;case"set_selection":er(t,e);break;default:{const r=T.transform(e.path,t),n=T.transform(t.path,e);r||(e=null),n||(t=null)}}break;case"set_selection":switch(t.type){case"set_selection":break;default:er(e,t)}break;case"move_node":switch(t.type){case"set_selection":er(t,e);break;case"move_node":{const r=T.transform(e.path,t),n=T.transform(e.newPath,t),o=T.transform(t.path,e),a=T.transform(t.newPath,e);n&&r?(e.path=r,e.newPath=n):e=null,a&&o?(t.path=o,t.newPath=a):t=null;break}default:{const r=T.transform(e.path,t),n=T.transform(e.newPath,t),o=T.transform(t.path,e);r&&n?(e.path=r,e.newPath=n):e=null,o?t.path=o:t=null}}break;default:switch(t.type){case"set_selection":er(t,e);break;default:{const r=T.transform(e.path,t),n=T.transform(t.path,e);r?e.path=r:e=null,n?t.path=n:t=null}}}return[e,t]}function er(e,t){e.properties&&(e.properties.anchor=e.properties.anchor&&L.transform(e.properties.anchor,t)||void 0,e.properties.focus=e.properties.focus&&L.transform(e.properties.focus,t)||void 0),e.newProperties&&(e.newProperties.anchor=e.newProperties.anchor&&L.transform(e.newProperties.anchor,t)||void 0,e.newProperties.focus=e.newProperties.focus&&L.transform(e.newProperties.focus,t)||void 0)}!function(e){e[e.Hello=0]="Hello",e[e.ReqMerge=1]="ReqMerge",e[e.AckMerge=2]="AckMerge"}(Ht||(Ht={})),function(e){e[e.unknown=0]="unknown",e[e.primary=1]="primary",e[e.secondary=2]="secondary"}(Kt||(Kt={})),function(e){e.NotInARoom="NotInARoom"}(Jt||(Jt={})),function(e){e.hello="hello",e.join="join",e.quit="quit",e.listRooms="listRooms",e.signal="signal"}(Ut||(Ut={})),function(e){e.hello="hello",e.join="join",e.quit="quit",e.error="error",e.signal="signal",e.listRooms="listRooms"}($t||($t={}));const tr={position:"absolute",top:-2,pointerEvents:"none",userSelect:"none",transform:"translateY(-100%)",fontSize:10,background:"palevioletred",whiteSpace:"nowrap"},rr={position:"absolute",pointerEvents:"none",userSelect:"none",height:"1.2em",width:2,background:"palevioletred"};function nr({userInfo:e,isForward:t}){const r=Object.assign(Object.assign({},tr),{background:e.color,color:"black",left:"0%"}),o=Object.assign(Object.assign({},rr),{position:"relative",background:e.color,left:"0%"});return o[t?"bottom":"top"]=0,n.createElement("span",{style:{backgroundColor:e.color}},n.createElement("span",{className:"caret",contentEditable:!1,style:o},n.createElement("span",{style:{position:"relative"}},n.createElement("span",{contentEditable:!1,style:r},e.username),n.createElement("span",{style:{borderLeft:"1px solid currentColor",borderTop:"1px solid currentColor",borderBottom:"1px solid currentColor",animation:"cursor 1s steps(2, jump-both) infinite"}}))))}const or=({attributes:e,children:t,leaf:r})=>(r.bold&&(t=n.createElement("strong",null,t)),r.italic&&(t=n.createElement("em",null,t)),r.underlined&&(t=n.createElement("u",null,t)),n.createElement("span",Object.assign({},e,{style:Object.assign({background:r.isCaret?r.userInfo.color:void 0},e.style)}),r.isCaret?n.createElement(nr,Object.assign({},r)):null,t));var ar=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};const ir=(e,t)=>{const r=sr(e,t);ne.setNodes(e,{[t]:!r||null},{match:J.isText,split:!0})},sr=(e,t)=>{const[r]=Array.from(S.nodes(e,{match:e=>!0===e[t],mode:"all"}));return!!r},lr=()=>{const e=n.useRef(),t=nt();return n.useEffect(()=>{const r=e.current,{selection:n}=t;if(!r)return;if(!n||!Ze.isFocused(t)||q.isCollapsed(n)||""===S.string(t,n))return void r.removeAttribute("style");const o=window.getSelection(),a=null==o?void 0:o.getRangeAt(0),i=null==a?void 0:a.getBoundingClientRect();i&&(r.style.opacity="1",r.style.top=`${i.top+window.pageYOffset-r.offsetHeight}px`,r.style.left=`${i.left+window.pageXOffset-r.offsetWidth/2+i.width/2}px`)}),n.createElement("div",null,n.createElement(dr,{format:"bold",icon:"format_bold"}),n.createElement(dr,{format:"italic",icon:"format_italic"}),n.createElement(dr,{format:"underlined",icon:"format_underlined"}))},cr=e=>{var{active:t,children:r}=e,o=ar(e,["active","children"]);return n.createElement("button",Object.assign({},o,{style:Object.assign({color:t?"blue":"gray"},o.style)}),n.createElement("span",null,r))},ur=({children:e})=>n.createElement("div",null,e),dr=({format:e,icon:t})=>{const r=nt();return n.createElement(cr,{active:sr(r,e),onMouseDown:t=>{t.preventDefault(),ir(r,e)}},n.createElement(ur,null,t))};var fr=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),pr=r("./node_modules/rxjs/_esm5/internal/operators/map.js");class hr{constructor(e,t,r,n){this.userInfo=e,this.receiveSignal=t,this.sendSignal=r,this.subs=new fr.a,this.receiveFrom=this.receiveSignal.pipe(Object(pr.a)(e=>{return JSON.parse(e.signal)}))}get id(){return this.userInfo.id}sendTo(e){this.sendSignal.next({signalType:"offer",signal:JSON.stringify(e)})}dispose(){}}const vr=function(e){const t=localStorage.getItem("userinfo"),r=new Yt.a(t?JSON.parse(t):null),n=new WebSocket(e),o=e=>{n.send(JSON.stringify(e))};n.onopen=e=>{o({type:Ut.hello,from:r.value})};const i=new Yt.a([]),s=new Yt.a(null);s.name="currentRoom";const l=new a.a,c=new a.a,u=new a.a,d=new a.a;return n.addEventListener("message",e=>{var t,n;const a=JSON.parse(e.data);console.log("connection event ",a.type);const f=r.value;if(a.type===$t.hello)return i.next(a.rooms),r.next(a.user),console.log(`%c Server says: hello, [${a.user.id}] ${a.user.username}!`,`color: ${a.user.color}`),void localStorage.setItem("userinfo",JSON.stringify(a.user));if(f)switch(a.type){case $t.listRooms:i.next(a.rooms);break;case $t.join:{const e=a.room,r=i.value.findIndex(t=>t.name===e.name);-1===r?i.next([...i.value,e]):(i.value[r]=e,i.next(i.value.slice())),a.userInfo.id===f.id?(s.next(a.room),setTimeout(()=>{a.room.users.forEach(e=>{e.id!==f.id&&c.next({userInfo:e,shouldRequest:!0})})},100)):((null===(t=s.value)||void 0===t?void 0:t.name)===a.room.name&&s.next(a.room),e.name===(null===(n=s.value)||void 0===n?void 0:n.name)&&c.next({userInfo:a.userInfo,shouldRequest:!1}));break}case $t.quit:a.userInfo.id===f.id?(d.next(a),s.next(null),o({type:Ut.listRooms})):(u.next(a),s.next(null===s.value?null:Object.assign(Object.assign({},s.value),{users:s.value.users.filter(e=>e.id!==a.userInfo.id)})));break;case $t.signal:l.next({from:a.from,signal:a.signal,signalType:a.signalType});break;case $t.error:console.error("App Error: ",a.errorCode)}}),{rooms:i,currentRoom:s,events:{addPeer:c,removePeer:u,clearPeers:d},thisIsMe:r,signal:l,send:o}}("ws://158.247.213.142:9083/signal-server");function gr(){return n.createElement(n.Suspense,{fallback:"加载中..."},n.createElement(mr,null))}function mr(){const[e]=Vt(vr.thisIsMe);return e?n.createElement("div",{style:{width:"100vw",height:"100vh",background:"#fff",display:"grid",gridTemplateColumns:"250px 1fr"}},n.createElement("div",null,n.createElement("div",null,"这个是你:"),n.createElement("div",null,n.createElement(Er,{userInfo:e}),e.username)),n.createElement("div",null,n.createElement(wr,{userInfo:e}))):n.createElement("span",null,"加载用户信息...")}const yr=(e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];fe.withoutSaving(t,()=>{S.withoutNormalizing(t,()=>{for(var e of n)t.apply(e)})}),e.redos.pop(),e.undos.push(n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];fe.withoutSaving(t,()=>{S.withoutNormalizing(t,()=>{var e=n.map(M.inverse).reverse();for(var r of e)r===e[e.length-1]&&"set_selection"===r.type&&null==r.newProperties||t.apply(r)})}),e.redos.push(n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:o}=t,{undos:a}=o,i=a[a.length-1],s=i&&i[i.length-1],l=ve(e,s),c=fe.isSaving(t),u=fe.isMerging(t);if(null==c&&(c=he(e)),c){if(null==u&&(u=null!=i&&(0!==n.length||(pe(e,s)||l))),i&&u)l&&i.pop(),i.push(e);else{var d=[e];a.push(d)}for(;a.length>100;)a.shift();ge(e)&&(o.redos=[])}r(e)},t})((e=>{var t=e,{apply:r,onChange:n}=t;return t.apply=e=>{var n=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[o,a]of S.levels(t,{at:e.path})){var i=Ze.findKey(t,o);n.push([a,i])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[s,l]of S.levels(t,{at:T.parent(e.path)})){var c=Ze.findKey(t,s);n.push([l,c])}}for(var[u,d]of(r(e),n)){var[f]=S.node(t,u);We.set(f,d)}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,o]=q.edges(r),a=S.void(t,{at:n.path}),i=S.void(t,{at:o.path});if(!q.isCollapsed(r)||a){var s=Ze.toDOMRange(t,r),l=s.cloneContents(),c=l.childNodes[0];if(l.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),i){var[u]=i,d=s.cloneRange(),f=Ze.toDOMNode(t,u);d.setEndAfter(f),l=d.cloneContents()}if(a&&(c=l.querySelector("[data-slate-spacer]")),Array.from(l.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),Ye(c)){var p=document.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),l.appendChild(p),c=p}var h=t.getFragment(),v=JSON.stringify(h),g=window.btoa(encodeURIComponent(v));c.setAttribute("data-slate-fragment",g),e.setData("application/x-slate-fragment",g);var m=document.createElement("div");m.appendChild(l),m.setAttribute("hidden","true"),document.body.appendChild(m),e.setData("text/html",m.innerHTML),e.setData("text/plain",Ge(m)),document.body.removeChild(m)}}},t.insertData=e=>{var r=e.getData("application/x-slate-fragment");if(r){var n=decodeURIComponent(window.atob(r)),o=JSON.parse(n);t.insertFragment(o)}else{var a=e.getData("text/plain");if(a){var i=a.split(/\r\n|\r|\n/),s=!1;for(var l of i)s&&ne.splitNodes(t,{always:!0}),t.insertText(l),s=!0}}},t.onChange=()=>{Se.a.unstable_batchedUpdates(()=>{var e=He.get(t);e&&e(),n()})},t})(function(e){const t=e,{apply:r}=e;let n={},o=Kt.unknown,i=new Zt(e,r),s=[];e.apply=e=>{r(e),s.push(e),l&&clearTimeout(l),l=setTimeout(()=>{if(o===Kt.secondary)for(const e in n){n[e].sendTo({type:Ht.ReqMerge,version:i.version,ops:s})}else if(o===Kt.primary){i.version+=s.length;for(const e in n){n[e].sendTo({type:Ht.AckMerge,newVersion:i.version,unmergedOps:s})}}s=[],l=0},50)};let l=0,c=new a.a;return t.collabo={docState:i,get isPrimary(){return o===Kt.primary},initializeAsSecondary:c,initializeAsMaster(){console.log("is master"),o=Kt.primary},addPeer(t){n[t.id]=t,t.receiveFrom.subscribe(function(r){if(o===Kt.unknown)switch(r.type){case Ht.Hello:o=Kt.secondary,i.version=r.version,c.next(r.nodes)}else if(o===Kt.primary)switch(r.type){case Ht.Hello:t.sendTo({type:Ht.Hello,version:i.version,nodes:e.children});break;case Ht.ReqMerge:if(!i.mergePatch(r,t))throw new Error("primary falls behind secondary");for(const e in n){n[e].sendTo({type:Ht.AckMerge,newVersion:i.version,unmergedOps:s})}}else if(o===Kt.secondary)switch(r.type){case Ht.AckMerge:i.ackMerge(r.newVersion,r.unmergedOps,t)}}),o===Kt.unknown&&setTimeout(()=>{t.sendTo({type:Ht.Hello,version:i.version,nodes:e.children})},500)},removePeer(t){var r;const o=n[t];o&&(i.removeCursor(o),e.onChange()),null===(r=n[t])||void 0===r||r.dispose(),delete n[t]},clear(){for(const e of Object.values(n))e.dispose();n={},i=new Zt(e,r),o=Kt.unknown,c=new a.a}},t}(br={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:e=>{for(var t of S.pathRefs(br))R.transform(t,e);for(var r of S.pointRefs(br))z.transform(r,e);for(var n of S.rangeRefs(br))V.transform(n,e);var o=new Set,a=[],i=e=>{if(e){var t=e.join(",");o.has(t)||(o.add(t),a.push(e))}},s=f.get(br)||[],l=ie(e);for(var c of s)i(T.transform(c,e));for(var u of l)i(u);f.set(br,a),ne.transform(br,e),br.operations.push(e),S.normalize(br),"set_selection"===e.type&&(br.marks=null),p.get(br)||(p.set(br,!0),Promise.resolve().then(()=>{p.set(br,!1),br.onChange(),br.operations=[]}))},addMark:(e,t)=>{var{selection:r}=br;if(r)if(q.isExpanded(r))ne.setNodes(br,{[e]:t},{match:J.isText,split:!0});else{var n=ae({},S.marks(br)||{},{[e]:t});br.marks=n,br.onChange()}},deleteBackward:e=>{var{selection:t}=br;t&&q.isCollapsed(t)&&ne.delete(br,{unit:e,reverse:!0})},deleteForward:e=>{var{selection:t}=br;t&&q.isCollapsed(t)&&ne.delete(br,{unit:e})},deleteFragment:()=>{var{selection:e}=br;e&&q.isExpanded(e)&&ne.delete(br)},getFragment:()=>{var{selection:e}=br;return e?_.fragment(br,e):[]},insertBreak:()=>{ne.splitNodes(br,{always:!0})},insertFragment:e=>{ne.insertFragment(br,e)},insertNode:e=>{ne.insertNodes(br,e)},insertText:e=>{var{selection:t,marks:r}=br;if(t){if(q.isCollapsed(t)){var n=S.above(br,{match:e=>S.isInline(br,e),mode:"highest"});if(n){var[,o]=n;if(S.isEnd(br,t.anchor,o)){var a=S.after(br,o);ne.setSelection(br,{anchor:a,focus:a})}}}if(r){var i=ae({text:e},r);ne.insertNodes(br,i)}else ne.insertText(br,e);br.marks=null}},normalizeNode:e=>{var[t,r]=e;if(!J.isText(t))if(A.isElement(t)&&0===t.children.length)ne.insertNodes(br,{text:""},{at:r.concat(0),voids:!0});else for(var n=!S.isEditor(t)&&A.isElement(t)&&(br.isInline(t)||0===t.children.length||J.isText(t.children[0])||br.isInline(t.children[0])),o=0,a=0;a<t.children.length;a++,o++){var i=t.children[a],s=t.children[a-1],l=a===t.children.length-1;(J.isText(i)||A.isElement(i)&&br.isInline(i))!==n?(ne.removeNodes(br,{at:r.concat(o),voids:!0}),o--):A.isElement(i)?br.isInline(i)&&(null!=s&&J.isText(s)?l&&(ne.insertNodes(br,{text:""},{at:r.concat(o+1),voids:!0}),o++):(ne.insertNodes(br,{text:""},{at:r.concat(o),voids:!0}),o++)):null!=s&&J.isText(s)&&(J.equals(i,s,{loose:!0})?(ne.mergeNodes(br,{at:r.concat(o),voids:!0}),o--):""===s.text?(ne.removeNodes(br,{at:r.concat(o-1),voids:!0}),o--):l&&""===i.text&&(ne.removeNodes(br,{at:r.concat(o),voids:!0}),o--))}},removeMark:e=>{var{selection:t}=br;if(t)if(q.isExpanded(t))ne.unsetNodes(br,e,{match:J.isText,split:!0});else{var r=ae({},S.marks(br)||{});delete r[e],br.marks=r,br.onChange()}}})));var br;function wr({userInfo:e}){var t;const[r]=Vt(vr.currentRoom);return n.useEffect(()=>{var t;(null===(t=null==r?void 0:r.users)||void 0===t?void 0:t[0].id)===e.id&&yr.collabo.initializeAsMaster()},[null===(t=null==r?void 0:r.users)||void 0===t?void 0:t[0].id]),r&&yr?n.createElement(xr,{roomInfo:r,editor:yr,userInfo:e}):n.createElement(Or,null)}function Or(){const[e]=Vt(vr.rooms);return e?n.createElement(n.Fragment,null,n.createElement("button",{style:{background:"#909",color:"#fff",borderRadius:6,border:"3px solid #999",padding:"5px 10px",fontSize:20},onClick:()=>{const e=prompt("房间名字?");e&&vr.send({type:Ut.join,roomName:e})}},"创建/加入房间"),n.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh"}},e.map(e=>n.createElement("div",{key:e.name,style:{background:"#909",color:"#fff",borderRadius:6,border:"3px solid #999",padding:"5px 10px",fontSize:20,minHeight:200,minWidth:400,cursor:"pointer"},onClick:()=>{vr.send({type:Ut.join,roomName:e.name})}},n.createElement("h2",null,e.name),n.createElement("div",null,e.users.map(e=>n.createElement(Er,{userInfo:e,key:e.id}))))))):n.createElement("span",null,"加载房间信息...")}function xr({userInfo:e,editor:t,roomInfo:r}){const[o,a]=n.useState(()=>[{type:"paragraph",children:[{text:"A line of text in a paragraph."}]}]);n.useEffect(()=>{if(!t.collabo.isPrimary){const e=t.collabo.initializeAsSecondary.subscribe(e=>{a(e)});return()=>e.unsubscribe()}},[t]);const[i,s]=n.useState([]),l=n.useCallback(([e,t])=>{const r=[];if(J.isText(e))for(const[n,o]of i){const a=o.current;if(a&&q.includes(a,t)){const{focus:i,anchor:s}=a,l=T.equals(i.path,t),c=T.equals(s.path,t),u=q.isForward(a);r.push(Object.assign(Object.assign({},o),{userInfo:n,isForward:u,isCaret:!0,anchor:{path:t,offset:c?s.offset:u?0:e.text.length},focus:{path:t,offset:l?i.offset:u?e.text.length:0}}))}}return r},[i]);n.useEffect(()=>{const e=t.collabo.docState.cursors.subscribe(e=>{s(Array.from(e.entries()).map(e=>[e[0].userInfo,e[1]]))});return()=>{e.unsubscribe()}},[t]);const c=n.useCallback(e=>n.createElement(or,Object.assign({},e)),[l]);return n.createElement(n.Fragment,null,n.createElement("div",null,r.users.map(e=>n.createElement(Er,{key:e.id,userInfo:e,style:{marginRight:16}}))),n.createElement(ot,{editor:t,value:o,onChange:e=>{a(e)},onDOMBeforeInput:e=>{switch(e.preventDefault(),e.inputType){case"formatBold":return ir(t,"bold");case"formatItalic":return ir(t,"italic");case"formatUnderline":return ir(t,"underline")}}},n.createElement(lr,null),n.createElement(Dt,{decorate:l,renderLeaf:c,style:{width:300,height:200,border:"1px solid black"}})))}function Er({userInfo:e,style:t}){return n.createElement("span",{style:Object.assign({height:20,width:20,lineHeight:"18px",background:"#333",textAlign:"center",borderRadius:"50%",border:"1px solid "+e.color,color:e.color,display:"inline-block"},t)},e.username.slice(0,1))}function jr(){const[e,t]=Object(n.useState)(!1);return o.a.createElement("div",null,o.a.createElement("div",null,"基本上就是参考了网上的一些讨论实现了富文本多人同时编辑的问题"),o.a.createElement("div",null,"参考过的资料:",o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("a",{href:"https://github.com/ianstormtaylor/slate/issues/259"},"https://github.com/ianstormtaylor/slate/issues/259")),o.a.createElement("li",null,o.a.createElement("a",{href:"http://confreaks.tv/videos/railsconf2018-building-a-collaborative-text-editor"},"http://confreaks.tv/videos/railsconf2018-building-a-collaborative-text-editor")),o.a.createElement("li",null,o.a.createElement("a",{href:"https://arxiv.org/pdf/1810.02137.pdf"},"https://arxiv.org/pdf/1810.02137.pdf")))),o.a.createElement("div",null,"本来是觉得想用rtc和crdt实现p2p的, 发现比较困难, 先实现一个有中心的, 中心就是第一个进入房间的人, 他的编辑器是唯一真相, 其他人只是在上面申请提交, 这个人退房了就会失效, 其实应该是一个服务器来充当中心的. 不过后面想借鉴帧同步和选举算法看能不能选出新primary来实现不需要服务器."),o.a.createElement("div",null,"这里是",o.a.createElement("a",{href:"https://github.com/buhichan/buhichan.github.io/tree/master/src/routes/demos/slate-collabo/src"},"源码")),e&&o.a.createElement(gr,null)||o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"要看demo, 得先点击左上小锁图标",">","网站设置",">","不安全内容",">","允许, 因为我没有证书的域名, 不然就跑不起来的."),o.a.createElement("button",{onClick:()=>{t(!0)}},"设置好了")))}vr.events.addPeer.subscribe(({userInfo:e,shouldRequest:t})=>{const r=new a.a;yr.collabo.addPeer(new hr(e,vr.signal,r,t)),r.subscribe(t=>{vr.send(Object.assign({type:Ut.signal,to:e},t))})}),vr.events.removePeer.subscribe(({userInfo:e})=>{yr.collabo.removePeer(e.id)}),vr.events.clearPeers.subscribe(()=>{yr.collabo.clear()}),r.d(t,"default",function(){return jr})}}]);
//# sourceMappingURL=6.660933b25063ead37596.js.map